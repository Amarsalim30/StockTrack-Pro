{"snapshots":{"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/data/repositories_impl/purchase_order_repository_impl.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/data/repositories_impl/purchase_order_repository_impl.dart","baseContent":"// lib/data/repositories/order/purchase_order_repository_impl.dart\n\nimport 'package:clean_arch_app/data/datasources/remote/purchase_order_api.dart';\nimport 'package:clean_arch_app/data/mappers/order/purchase_order_mapper.dart';\nimport 'package:clean_arch_app/data/models/order/purchase_order_model.dart';\nimport 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {\n  final PurchaseOrderApi api;\n\n  PurchaseOrderRepositoryImpl(this.api);\n\n  @override\n  Future<void> createPurchaseOrder(PurchaseOrder order) async {\n    await api.createPurchaseOrder(order);\n  }\n\n  @override\n  Future<PurchaseOrder> getPurchaseOrderById(String id) async {\n    final model = await api.getPurchaseOrderById(id);\n    if(model != null) {\n      final PurchaseOrder purchaseOrder = model;\n      return purchaseOrder;\n    }\n    return (_);\n  }\n\n  @override\n  Future<List<PurchaseOrder>> getAllPurchaseOrders() async {\n    final models = await api.getAllPurchaseOrders();\n    return ;\n  }\n\n  @override\n  Future<PurchaseOrder> updatePurchaseOrder(PurchaseOrder order) async {\n    final model = PurchaseOrderMapper.toModel(order);\n    final resultModel = await api.updatePurchaseOrder(model);\n    return PurchaseOrderMapper.toEntity(resultModel);\n  }\n\n  @override\n  Future<void> deletePurchaseOrder(String id) async {\n    await api.deletePurchaseOrder(id);\n  }\n\n  @override\n  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId) async {\n    final model = await api.approvePurchaseOrder(id, approverUserId);\n    return PurchaseOrderMapper.toEntity(model);\n  }\n\n  @override\n  Future<PurchaseOrder> cancelPurchaseOrder(String id, String reason) async {\n    final model = await api.cancelPurchaseOrder(id, reason);\n    return PurchaseOrderMapper.toEntity(model);\n  }\n}\n","baseTimestamp":1755116559620,"deltas":[{"timestamp":1755116755170,"changes":[{"type":"MODIFY","lineNumber":53,"content":"    return model;","oldContent":"    return PurchaseOrderMapper.toEntity(model);"}]},{"timestamp":1755116823992,"changes":[{"type":"MODIFY","lineNumber":19,"content":"  Future<PurchaseOrder?> getPurchaseOrderById(String id) async {","oldContent":"  Future<PurchaseOrder> getPurchaseOrderById(String id) async {"}]},{"timestamp":1755116829622,"changes":[{"type":"MODIFY","lineNumber":25,"content":"    return null;","oldContent":"    return (_);"}]},{"timestamp":1755117756502,"changes":[{"type":"DELETE","lineNumber":3,"oldContent":"import 'package:clean_arch_app/data/mappers/order/purchase_order_mapper.dart';"},{"type":"DELETE","lineNumber":4,"oldContent":"import 'package:clean_arch_app/data/models/order/purchase_order_model.dart';"},{"type":"INSERT","lineNumber":53,"content":""},{"type":"INSERT","lineNumber":54,"content":"  @override"},{"type":"INSERT","lineNumber":55,"content":"  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"INSERT","lineNumber":56,"content":"    final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"INSERT","lineNumber":57,"content":"    return models;"},{"type":"INSERT","lineNumber":58,"content":"  }"}]},{"timestamp":1755118721752,"changes":[{"type":"DELETE","lineNumber":0,"oldContent":"// lib/data/repositories/order/purchase_order_repository_impl.dart"},{"type":"DELETE","lineNumber":1,"oldContent":""},{"type":"INSERT","lineNumber":0,"content":"import 'package:dartz/dartz.dart';"},{"type":"INSERT","lineNumber":1,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"MODIFY","lineNumber":4,"content":"import 'package:clean_arch_app/domain/repositories/order/purchase_order_repository.dart';","oldContent":"import 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';"},{"type":"DELETE","lineNumber":12,"oldContent":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"MODIFY","lineNumber":12,"content":"  Future<Either<Failure, void>> createPurchaseOrder(PurchaseOrder order) async {","oldContent":"    await api.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":13,"content":"    try {"},{"type":"INSERT","lineNumber":14,"content":"      await api.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":15,"content":"      return const Right(null);"},{"type":"INSERT","lineNumber":16,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":17,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":18,"content":"    }"},{"type":"DELETE","lineNumber":17,"oldContent":"  Future<PurchaseOrder?> getPurchaseOrderById(String id) async {"},{"type":"DELETE","lineNumber":18,"oldContent":"    final model = await api.getPurchaseOrderById(id);"},{"type":"DELETE","lineNumber":19,"oldContent":"    if(model != null) {"},{"type":"DELETE","lineNumber":20,"oldContent":"      final PurchaseOrder purchaseOrder = model;"},{"type":"DELETE","lineNumber":21,"oldContent":"      return purchaseOrder;"},{"type":"INSERT","lineNumber":22,"content":"  Future<Either<Failure, PurchaseOrder>> getPurchaseOrderById(String id) async {"},{"type":"INSERT","lineNumber":23,"content":"    try {"},{"type":"INSERT","lineNumber":24,"content":"      final model = await api.getPurchaseOrderById(id);"},{"type":"INSERT","lineNumber":25,"content":"      if (model != null) {"},{"type":"INSERT","lineNumber":26,"content":"        return Right(model);"},{"type":"INSERT","lineNumber":27,"content":"      } else {"},{"type":"INSERT","lineNumber":28,"content":"        return Left(ServerFailure(\"Purchase order not found\"));"},{"type":"INSERT","lineNumber":29,"content":"      }"},{"type":"INSERT","lineNumber":30,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":31,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":23,"oldContent":"    return null;"},{"type":"DELETE","lineNumber":27,"oldContent":"  Future<List<PurchaseOrder>> getAllPurchaseOrders() async {"},{"type":"DELETE","lineNumber":28,"oldContent":"    final models = await api.getAllPurchaseOrders();"},{"type":"DELETE","lineNumber":29,"oldContent":"    return models;"},{"type":"INSERT","lineNumber":36,"content":"  Future<Either<Failure, List<PurchaseOrder>>> getAllPurchaseOrders() async {"},{"type":"INSERT","lineNumber":37,"content":"    try {"},{"type":"INSERT","lineNumber":38,"content":"      final models = await api.getAllPurchaseOrders();"},{"type":"INSERT","lineNumber":39,"content":"      return Right(models);"},{"type":"INSERT","lineNumber":40,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":41,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":42,"content":"    }"},{"type":"DELETE","lineNumber":33,"oldContent":"  Future<void> updatePurchaseOrder(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":34,"oldContent":"    await api.updatePurchaseOrder(order);"},{"type":"INSERT","lineNumber":46,"content":"  Future<Either<Failure, void>> updatePurchaseOrder(PurchaseOrder order) async {"},{"type":"INSERT","lineNumber":47,"content":"    try {"},{"type":"INSERT","lineNumber":48,"content":"      await api.updatePurchaseOrder(order);"},{"type":"INSERT","lineNumber":49,"content":"      return const Right(null);"},{"type":"INSERT","lineNumber":50,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":51,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":52,"content":"    }"},{"type":"DELETE","lineNumber":38,"oldContent":"  Future<void> deletePurchaseOrder(String id) async {"},{"type":"DELETE","lineNumber":39,"oldContent":"    await api.deletePurchaseOrder(id);"},{"type":"INSERT","lineNumber":56,"content":"  Future<Either<Failure, void>> deletePurchaseOrder(String id) async {"},{"type":"INSERT","lineNumber":57,"content":"    try {"},{"type":"INSERT","lineNumber":58,"content":"      await api.deletePurchaseOrder(id);"},{"type":"INSERT","lineNumber":59,"content":"      return const Right(null);"},{"type":"INSERT","lineNumber":60,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":61,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":62,"content":"    }"},{"type":"DELETE","lineNumber":43,"oldContent":"  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId) async {"},{"type":"DELETE","lineNumber":44,"oldContent":"    final model = await api.approvePurchaseOrder(id, approverUserId);"},{"type":"DELETE","lineNumber":45,"oldContent":"    return model;"},{"type":"INSERT","lineNumber":66,"content":"  Future<Either<Failure, PurchaseOrder>> approvePurchaseOrder(String id, String approverUserId) async {"},{"type":"INSERT","lineNumber":67,"content":"    try {"},{"type":"INSERT","lineNumber":68,"content":"      final model = await api.approvePurchaseOrder(id, approverUserId);"},{"type":"INSERT","lineNumber":69,"content":"      return Right(model);"},{"type":"INSERT","lineNumber":70,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":71,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":72,"content":"    }"},{"type":"DELETE","lineNumber":49,"oldContent":"  Future<PurchaseOrder> cancelPurchaseOrder(String id, String reason) async {"},{"type":"DELETE","lineNumber":50,"oldContent":"    final model = await api.cancelPurchaseOrder(id, reason);"},{"type":"INSERT","lineNumber":76,"content":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"INSERT","lineNumber":77,"content":"    try {"},{"type":"INSERT","lineNumber":78,"content":"      final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"INSERT","lineNumber":79,"content":"      return Right(models);"},{"type":"INSERT","lineNumber":80,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":81,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":82,"content":"    }"},{"type":"INSERT","lineNumber":83,"content":"  }"},{"type":"DELETE","lineNumber":52,"oldContent":"    return model;"},{"type":"INSERT","lineNumber":86,"content":"  Future<Either<Failure, void>> cancelPurchaseOrder(String id, String reason) async {"},{"type":"INSERT","lineNumber":87,"content":"    try {"},{"type":"INSERT","lineNumber":88,"content":"      await api.cancelPurchaseOrder(id, reason);"},{"type":"INSERT","lineNumber":89,"content":"      return const Right(null);"},{"type":"INSERT","lineNumber":90,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":91,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":92,"content":"    }"},{"type":"DELETE","lineNumber":55,"oldContent":"  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"DELETE","lineNumber":57,"oldContent":"    final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"DELETE","lineNumber":59,"oldContent":"    return models;"},{"type":"DELETE","lineNumber":60,"oldContent":"  }"}]},{"timestamp":1755118738955,"changes":[{"type":"MODIFY","lineNumber":13,"content":"    try {","oldContent":"    await api.createPurchaseOrder(order);"},{"type":"DELETE","lineNumber":15,"oldContent":"  }"},{"type":"DELETE","lineNumber":17,"oldContent":""},{"type":"DELETE","lineNumber":19,"oldContent":"  @override"},{"type":"DELETE","lineNumber":20,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":17,"content":"      return Left(ServerFailure(message: e.toString()));"},{"type":"INSERT","lineNumber":19,"content":"  }"},{"type":"INSERT","lineNumber":20,"content":""},{"type":"INSERT","lineNumber":21,"content":"  @override"},{"type":"DELETE","lineNumber":23,"oldContent":"    }"},{"type":"DELETE","lineNumber":26,"oldContent":"  }"},{"type":"DELETE","lineNumber":28,"oldContent":""},{"type":"DELETE","lineNumber":30,"oldContent":"  @override"},{"type":"DELETE","lineNumber":35,"oldContent":"  }"},{"type":"INSERT","lineNumber":32,"content":"    }"},{"type":"INSERT","lineNumber":33,"content":"  }"},{"type":"DELETE","lineNumber":39,"oldContent":"  }"},{"type":"DELETE","lineNumber":41,"oldContent":""},{"type":"DELETE","lineNumber":43,"oldContent":"  @override"},{"type":"DELETE","lineNumber":47,"oldContent":"  }"},{"type":"DELETE","lineNumber":49,"oldContent":""},{"type":"INSERT","lineNumber":43,"content":"  }"},{"type":"INSERT","lineNumber":44,"content":""},{"type":"DELETE","lineNumber":53,"oldContent":"  }"},{"type":"DELETE","lineNumber":55,"oldContent":""},{"type":"DELETE","lineNumber":57,"oldContent":"  @override"},{"type":"DELETE","lineNumber":61,"oldContent":""},{"type":"DELETE","lineNumber":63,"oldContent":"  @override"},{"type":"INSERT","lineNumber":54,"content":""},{"type":"INSERT","lineNumber":55,"content":"  @override"},{"type":"DELETE","lineNumber":66,"oldContent":"}"},{"type":"DELETE","lineNumber":69,"oldContent":""},{"type":"DELETE","lineNumber":74,"oldContent":"    }"},{"type":"DELETE","lineNumber":75,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":76,"oldContent":"    } catch (e) {"},{"type":"DELETE","lineNumber":77,"oldContent":"      return const Right(null);"},{"type":"DELETE","lineNumber":78,"oldContent":"      await api.cancelPurchaseOrder(id, reason);"},{"type":"INSERT","lineNumber":63,"content":"  }"},{"type":"INSERT","lineNumber":64,"content":""},{"type":"INSERT","lineNumber":65,"content":"  @override"},{"type":"DELETE","lineNumber":81,"oldContent":"    try {"},{"type":"DELETE","lineNumber":82,"oldContent":"  Future<Either<Failure, void>> cancelPurchaseOrder(String id, String reason) async {"},{"type":"DELETE","lineNumber":84,"oldContent":"  }"},{"type":"DELETE","lineNumber":86,"oldContent":"    }"},{"type":"DELETE","lineNumber":89,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":90,"oldContent":"    } catch (e) {"},{"type":"DELETE","lineNumber":92,"oldContent":"      return Right(models);"},{"type":"INSERT","lineNumber":73,"content":"  }"},{"type":"INSERT","lineNumber":74,"content":""},{"type":"INSERT","lineNumber":75,"content":"  @override"},{"type":"INSERT","lineNumber":76,"content":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"INSERT","lineNumber":77,"content":"    try {"},{"type":"INSERT","lineNumber":79,"content":"      return Right(models);"},{"type":"INSERT","lineNumber":80,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":81,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":82,"content":"    }"},{"type":"INSERT","lineNumber":83,"content":"  }"},{"type":"INSERT","lineNumber":84,"content":""},{"type":"INSERT","lineNumber":85,"content":"  @override"},{"type":"INSERT","lineNumber":86,"content":"  Future<Either<Failure, void>> cancelPurchaseOrder(String id, String reason) async {"},{"type":"DELETE","lineNumber":95,"oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"INSERT","lineNumber":88,"content":"      await api.cancelPurchaseOrder(id, reason);"},{"type":"INSERT","lineNumber":89,"content":"      return const Right(null);"},{"type":"INSERT","lineNumber":90,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":91,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":92,"content":"    }"},{"type":"INSERT","lineNumber":93,"content":"  }"},{"type":"INSERT","lineNumber":94,"content":"}"},{"type":"INSERT","lineNumber":95,"content":""}]},{"timestamp":1755118748769,"changes":[{"type":"MODIFY","lineNumber":17,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"      return Left(ServerFailure(message: e.toString()));"},{"type":"INSERT","lineNumber":18,"content":"    }"},{"type":"DELETE","lineNumber":21,"oldContent":"    }"},{"type":"DELETE","lineNumber":28,"oldContent":"    }"},{"type":"DELETE","lineNumber":30,"oldContent":"  }"},{"type":"DELETE","lineNumber":33,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":31,"content":"      return Left(ServerFailure(message: e.toString()));"},{"type":"INSERT","lineNumber":32,"content":"    }"},{"type":"INSERT","lineNumber":33,"content":"  }"},{"type":"DELETE","lineNumber":38,"oldContent":"  }"},{"type":"DELETE","lineNumber":39,"oldContent":""},{"type":"INSERT","lineNumber":43,"content":"  }"},{"type":"INSERT","lineNumber":44,"content":""},{"type":"DELETE","lineNumber":47,"oldContent":""},{"type":"DELETE","lineNumber":49,"oldContent":"  @override"},{"type":"DELETE","lineNumber":57,"oldContent":"  }"},{"type":"INSERT","lineNumber":62,"content":"    }"},{"type":"INSERT","lineNumber":64,"content":""},{"type":"INSERT","lineNumber":65,"content":"  @override"},{"type":"INSERT","lineNumber":66,"content":"  Future<Either<Failure, PurchaseOrder>> approvePurchaseOrder(String id, String approverUserId) async {"},{"type":"INSERT","lineNumber":67,"content":"    try {"},{"type":"INSERT","lineNumber":68,"content":"      final model = await api.approvePurchaseOrder(id, approverUserId);"},{"type":"INSERT","lineNumber":69,"content":"      return Right(model);"},{"type":"INSERT","lineNumber":70,"content":"    } catch (e) {"},{"type":"INSERT","lineNumber":71,"content":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":73,"content":"  }"},{"type":"INSERT","lineNumber":78,"content":"      final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"DELETE","lineNumber":72,"oldContent":"  Future<Either<Failure, PurchaseOrder>> approvePurchaseOrder(String id, String approverUserId) async {"},{"type":"DELETE","lineNumber":74,"oldContent":"    try {"},{"type":"DELETE","lineNumber":78,"oldContent":"      final model = await api.approvePurchaseOrder(id, approverUserId);"},{"type":"DELETE","lineNumber":81,"oldContent":"      return Right(model);"},{"type":"DELETE","lineNumber":83,"oldContent":"    } catch (e) {"},{"type":"INSERT","lineNumber":87,"content":"    try {"},{"type":"DELETE","lineNumber":85,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":90,"oldContent":"    }"},{"type":"DELETE","lineNumber":92,"oldContent":"      final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"DELETE","lineNumber":94,"oldContent":"    try {"}]},{"timestamp":1755118754178,"changes":[{"type":"INSERT","lineNumber":16,"content":"    } catch (e) {"},{"type":"DELETE","lineNumber":17,"oldContent":"      return Left(ServerFailure(message: e.toString()));"},{"type":"DELETE","lineNumber":29,"oldContent":"      return Left(ServerFailure(message: e.toString()));"},{"type":"MODIFY","lineNumber":31,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"    }"},{"type":"INSERT","lineNumber":32,"content":"    }"},{"type":"INSERT","lineNumber":41,"content":"      return Left(ServerFailure(message: e.toString()));"},{"type":"INSERT","lineNumber":42,"content":"    }"},{"type":"DELETE","lineNumber":42,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":44,"oldContent":"    }"},{"type":"DELETE","lineNumber":59,"oldContent":"    }"},{"type":"DELETE","lineNumber":62,"oldContent":""},{"type":"DELETE","lineNumber":64,"oldContent":"  @override"},{"type":"INSERT","lineNumber":62,"content":"    }"},{"type":"INSERT","lineNumber":64,"content":""},{"type":"INSERT","lineNumber":65,"content":"  @override"},{"type":"DELETE","lineNumber":67,"oldContent":"    }"},{"type":"DELETE","lineNumber":69,"oldContent":""},{"type":"DELETE","lineNumber":71,"oldContent":"  @override"},{"type":"DELETE","lineNumber":73,"oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"DELETE","lineNumber":75,"oldContent":"    try {"},{"type":"DELETE","lineNumber":77,"oldContent":"      return Right(models);"},{"type":"INSERT","lineNumber":72,"content":"    }"},{"type":"INSERT","lineNumber":74,"content":""},{"type":"INSERT","lineNumber":75,"content":"  @override"},{"type":"INSERT","lineNumber":76,"content":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"INSERT","lineNumber":77,"content":"    try {"},{"type":"INSERT","lineNumber":78,"content":"      final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"INSERT","lineNumber":79,"content":"      return Right(models);"},{"type":"DELETE","lineNumber":83,"oldContent":"      final models = await api.filterPurchaseOrders(status, supplierId);"},{"type":"INSERT","lineNumber":87,"content":"    try {"},{"type":"DELETE","lineNumber":89,"oldContent":"    try {"}]},{"timestamp":1755118757051,"changes":[{"type":"INSERT","lineNumber":30,"content":"    } catch (e) {"},{"type":"DELETE","lineNumber":32,"oldContent":"    } catch (e) {"},{"type":"MODIFY","lineNumber":43,"content":"  }","oldContent":"  }"},{"type":"MODIFY","lineNumber":51,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"MODIFY","lineNumber":62,"content":"    }","oldContent":"    }"},{"type":"INSERT","lineNumber":63,"content":"  }"},{"type":"DELETE","lineNumber":65,"oldContent":"  }"},{"type":"DELETE","lineNumber":69,"oldContent":"    }"},{"type":"MODIFY","lineNumber":71,"content":"      return Left(ServerFailure(e.toString()));","oldContent":""},{"type":"INSERT","lineNumber":72,"content":"    }"},{"type":"INSERT","lineNumber":73,"content":"  }"},{"type":"INSERT","lineNumber":74,"content":""},{"type":"DELETE","lineNumber":75,"oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":78,"oldContent":"  }"}]},{"timestamp":1755118761369,"changes":[{"type":"INSERT","lineNumber":42,"content":"    }"},{"type":"DELETE","lineNumber":43,"oldContent":"  }"},{"type":"INSERT","lineNumber":61,"content":"      return Left(ServerFailure(message: e.toString()));"},{"type":"DELETE","lineNumber":62,"oldContent":"    }"},{"type":"INSERT","lineNumber":70,"content":"    } catch (e) {"},{"type":"DELETE","lineNumber":72,"oldContent":"    } catch (e) {"},{"type":"MODIFY","lineNumber":75,"content":"  @override","oldContent":"  @override"}]},{"timestamp":1755118764481,"changes":[{"type":"MODIFY","lineNumber":71,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"INSERT","lineNumber":74,"content":""},{"type":"DELETE","lineNumber":75,"oldContent":"  @override"}]},{"timestamp":1755118767772,"changes":[{"type":"MODIFY","lineNumber":81,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"      return Left(ServerFailure(e.toString()));"}]},{"timestamp":1755118770897,"changes":[{"type":"MODIFY","lineNumber":45,"content":"  @override","oldContent":""},{"type":"MODIFY","lineNumber":91,"content":"      return Left(ServerFailure(message: e.toString()));","oldContent":"      return Left(ServerFailure(e.toString()));"},{"type":"DELETE","lineNumber":96,"oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId) async {"}]},{"timestamp":1755118789158,"changes":[{"type":"INSERT","lineNumber":6,"content":"import '../../domain/repositories/purchase_order_repository.dart';"},{"type":"INSERT","lineNumber":7,"content":""}]},{"timestamp":1755118793232,"changes":[{"type":"DELETE","lineNumber":4,"oldContent":"import 'package:clean_arch_app/domain/repositories/order/purchase_order_repository.dart';"},{"type":"MODIFY","lineNumber":7,"content":"class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {","oldContent":"class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {"}]},{"timestamp":1755118801442,"changes":[{"type":"MODIFY","lineNumber":7,"content":"class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {","oldContent":"class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {"},{"type":"MODIFY","lineNumber":29,"content":"        return Left(ServerFailure(message: \"Purchase order not found\"));","oldContent":"        return Left(ServerFailure(\"Purchase order not found\"));"},{"type":"DELETE","lineNumber":97,"oldContent":"    try {"}]},{"timestamp":1755118988122,"changes":[{"type":"INSERT","lineNumber":3,"content":"import 'package:clean_arch_app/data/mappers/order/purchase_order_mapper.dart';"},{"type":"INSERT","lineNumber":5,"content":"import 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';"},{"type":"DELETE","lineNumber":5,"oldContent":"import '../../domain/repositories/purchase_order_repository.dart';"},{"type":"DELETE","lineNumber":7,"oldContent":"class PurchaseOrderRepositoryImpl implements PurchaseOrderRepository {"},{"type":"MODIFY","lineNumber":15,"content":"      final model = PurchaseOrderMapper.fromEntity(order);","oldContent":"      await api.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":16,"content":"      await api.createPurchaseOrder(model);"},{"type":"MODIFY","lineNumber":28,"content":"        return Right(PurchaseOrderMapper.toEntity(model));","oldContent":"        return Right(model);"},{"type":"MODIFY","lineNumber":41,"content":"      return Right(models.map(PurchaseOrderMapper.toEntity).toList());","oldContent":"      return Right(models);"},{"type":"MODIFY","lineNumber":50,"content":"      final model = PurchaseOrderMapper.fromEntity(order);","oldContent":"      await api.updatePurchaseOrder(order);"},{"type":"INSERT","lineNumber":51,"content":"      await api.updatePurchaseOrder(model);"},{"type":"DELETE","lineNumber":70,"oldContent":"      return Right(model);"},{"type":"INSERT","lineNumber":72,"content":"      return Right(PurchaseOrderMapper.toEntity(model));"},{"type":"DELETE","lineNumber":80,"oldContent":"      return Right(models);"},{"type":"INSERT","lineNumber":82,"content":"      return Right(models.map(PurchaseOrderMapper.toEntity).toList());"}]},{"timestamp":1755119017448,"changes":[{"type":"MODIFY","lineNumber":6,"content":"","oldContent":""},{"type":"DELETE","lineNumber":28,"oldContent":"        return Right(model);"},{"type":"INSERT","lineNumber":29,"content":"      } else {"},{"type":"DELETE","lineNumber":41,"oldContent":"      return Right(models);"},{"type":"INSERT","lineNumber":42,"content":"    } catch (e) {"},{"type":"DELETE","lineNumber":50,"oldContent":"      await api.updatePurchaseOrder(order);"},{"type":"MODIFY","lineNumber":51,"content":"      await api.updatePurchaseOrder(model.id);","oldContent":"      await api.updatePurchaseOrder(model);"},{"type":"INSERT","lineNumber":52,"content":"      return const Right(null);"},{"type":"MODIFY","lineNumber":73,"content":"    } catch (e) {","oldContent":"    } catch (e) {"},{"type":"MODIFY","lineNumber":83,"content":"    } catch (e) {","oldContent":"    } catch (e) {"}]},{"timestamp":1755119027276,"changes":[{"type":"INSERT","lineNumber":5,"content":"import 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';"},{"type":"DELETE","lineNumber":6,"oldContent":""},{"type":"MODIFY","lineNumber":29,"content":"      } else {","oldContent":"      } else {"},{"type":"MODIFY","lineNumber":42,"content":"    } catch (e) {","oldContent":"    } catch (e) {"},{"type":"MODIFY","lineNumber":50,"content":"      final model = PurchaseOrderMapper.fromEntity(order);","oldContent":"      await api.updatePurchaseOrder(model.id);"},{"type":"INSERT","lineNumber":51,"content":"      await api.updatePurchaseOrder(model.id,);"},{"type":"DELETE","lineNumber":52,"oldContent":"      await api.updatePurchaseOrder(model);"},{"type":"INSERT","lineNumber":72,"content":"      return Right(PurchaseOrderMapper.toEntity(model));"},{"type":"DELETE","lineNumber":73,"oldContent":"    } catch (e) {"},{"type":"INSERT","lineNumber":82,"content":"      return Right(models.map(PurchaseOrderMapper.toEntity).toList());"},{"type":"DELETE","lineNumber":83,"oldContent":"    } catch (e) {"}]},{"timestamp":1755119034983,"changes":[{"type":"INSERT","lineNumber":28,"content":"        return Right(PurchaseOrderMapper.toEntity(model));"},{"type":"DELETE","lineNumber":29,"oldContent":"      } else {"},{"type":"INSERT","lineNumber":41,"content":"      return Right(models.map(PurchaseOrderMapper.toEntity).toList());"},{"type":"DELETE","lineNumber":42,"oldContent":"    } catch (e) {"},{"type":"MODIFY","lineNumber":51,"content":"      await api.updatePurchaseOrder(model.id, model);","oldContent":"      await api.updatePurchaseOrder(model.id,);"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/repositories/purchase_order_repository.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/repositories/purchase_order_repository.dart","baseContent":"// lib/domain/repositories/order/purchase_order_repository.dart\n\nimport 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\n\nabstract class PurchaseOrderRepository {\n  /// Create a new purchase order\n  Future<void> createPurchaseOrder(PurchaseOrder order);\n\n  /// Get a single purchase order by ID\n  Future<PurchaseOrder> getPurchaseOrderById(String id);\n\n  /// Get all purchase orders\n  Future<List<PurchaseOrder>> getAllPurchaseOrders();\n\n  /// Update a purchase order\n  Future<void> updatePurchaseOrder(PurchaseOrder order);\n\n  /// Delete a purchase order\n  Future<void> deletePurchaseOrder(String id);\n\n  /// Approve a purchase order\n  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId);\n  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId);\n\n  /// Cancel a purchase order\n  Future<void> cancelPurchaseOrder(String id, String reason);\n}\n","baseTimestamp":1755116728906,"deltas":[{"timestamp":1755116860253,"changes":[{"type":"MODIFY","lineNumber":9,"content":"  Future<PurchaseOrder?> getPurchaseOrderById(String id);","oldContent":"  Future<PurchaseOrder> getPurchaseOrderById(String id);"}]},{"timestamp":1755118706228,"changes":[{"type":"DELETE","lineNumber":0,"oldContent":"// lib/domain/repositories/order/purchase_order_repository.dart"},{"type":"DELETE","lineNumber":1,"oldContent":""},{"type":"INSERT","lineNumber":0,"content":"import 'package:dartz/dartz.dart';"},{"type":"INSERT","lineNumber":1,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"DELETE","lineNumber":5,"oldContent":"  /// Create a new purchase order"},{"type":"MODIFY","lineNumber":5,"content":"  Future<Either<Failure, void>> createPurchaseOrder(PurchaseOrder order);","oldContent":"  Future<void> createPurchaseOrder(PurchaseOrder order);"},{"type":"DELETE","lineNumber":8,"oldContent":"  /// Get a single purchase order by ID"},{"type":"DELETE","lineNumber":9,"oldContent":"  Future<PurchaseOrder?> getPurchaseOrderById(String id);"},{"type":"INSERT","lineNumber":7,"content":"  Future<Either<Failure, PurchaseOrder>> getPurchaseOrderById(String id);"},{"type":"DELETE","lineNumber":11,"oldContent":"  /// Get all purchase orders"},{"type":"DELETE","lineNumber":12,"oldContent":"  Future<List<PurchaseOrder>> getAllPurchaseOrders();"},{"type":"INSERT","lineNumber":9,"content":"  Future<Either<Failure, List<PurchaseOrder>>> getAllPurchaseOrders();"},{"type":"DELETE","lineNumber":14,"oldContent":"  /// Update a purchase order"},{"type":"DELETE","lineNumber":15,"oldContent":"  Future<void> updatePurchaseOrder(PurchaseOrder order);"},{"type":"INSERT","lineNumber":11,"content":"  Future<Either<Failure, void>> updatePurchaseOrder(PurchaseOrder order);"},{"type":"DELETE","lineNumber":17,"oldContent":"  /// Delete a purchase order"},{"type":"DELETE","lineNumber":18,"oldContent":"  Future<void> deletePurchaseOrder(String id);"},{"type":"INSERT","lineNumber":13,"content":"  Future<Either<Failure, void>> deletePurchaseOrder(String id);"},{"type":"DELETE","lineNumber":20,"oldContent":"  /// Approve a purchase order"},{"type":"DELETE","lineNumber":21,"oldContent":"  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId);"},{"type":"DELETE","lineNumber":22,"oldContent":"  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId);"},{"type":"INSERT","lineNumber":15,"content":"  Future<Either<Failure, PurchaseOrder>> approvePurchaseOrder(String id, String approverUserId);"},{"type":"DELETE","lineNumber":24,"oldContent":"  /// Cancel a purchase order"},{"type":"DELETE","lineNumber":25,"oldContent":"  Future<void> cancelPurchaseOrder(String id, String reason);"},{"type":"INSERT","lineNumber":17,"content":"  Future<Either<Failure, List<PurchaseOrder>>> filterPurchaseOrders(String? status, String? supplierId);"},{"type":"INSERT","lineNumber":18,"content":""},{"type":"INSERT","lineNumber":19,"content":"  Future<Either<Failure, void>> cancelPurchaseOrder(String id, String reason);"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/get_purchase_order_by_id_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/get_purchase_order_by_id_usecase.dart","baseContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass GetPurchaseOrderByIdUseCase {\n  final PurchaseOrderRepository repository;\n\n  GetPurchaseOrderByIdUseCase(this.repository);\n\n  Future<PurchaseOrder?> call(String id) async {\n    return await repository.getPurchaseOrderById(id);\n  }\n}\n","baseTimestamp":1755116840002,"deltas":[{"timestamp":1755116866197,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<PurchaseOrder> call(String id) async {","oldContent":"  Future<PurchaseOrder?> call(String id) async {"}]},{"timestamp":1755116869143,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<PurchaseOrder?> call(String id) async {","oldContent":"  Future<PurchaseOrder> call(String id) async {"}]},{"timestamp":1755119233654,"changes":[{"type":"INSERT","lineNumber":0,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"MODIFY","lineNumber":9,"content":"  Future<Either<Failure,PurchaseOrder?> call(String id) async {","oldContent":"  Future<PurchaseOrder?> call(String id) async {"}]},{"timestamp":1755119236172,"changes":[{"type":"DELETE","lineNumber":9,"oldContent":"  Future<PurchaseOrder?> call(String id) async {"},{"type":"MODIFY","lineNumber":9,"content":"  Future<Either<Failure,PurchaseOrder?>> call(String id) async {","oldContent":"  Future<Either<Failure,PurchaseOrder?> call(String id) async {"},{"type":"INSERT","lineNumber":10,"content":"    return await repository.getPurchaseOrderById(id);"}]},{"timestamp":1755119243003,"changes":[{"type":"INSERT","lineNumber":3,"content":"import 'package:dartz/dartz.dart';"},{"type":"MODIFY","lineNumber":11,"content":"    return await repository.getPurchaseOrderById(id);","oldContent":"  Future<Either<Failure,PurchaseOrder?> call(String id) async {"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/data/datasources/remote/purchase_order_api.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/data/datasources/remote/purchase_order_api.dart","baseContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/entities/order/purchase_order_item.dart';\nimport 'package:dio/dio.dart';\n\nclass PurchaseOrderApi {\n  final Dio dio;\n\n  PurchaseOrderApi(this.dio);\n\n  Future<void> createPurchaseOrder(PurchaseOrder order) async {\n    await dio.post('/purchase-orders', data: _mapFromEntity(order));\n  }\n\n  Future<void> updatePurchaseOrder(PurchaseOrder order) async {\n    await dio.put('/purchase-orders/${order.id}', data: _mapFromEntity(order));\n  }\n\n  Future<void> deletePurchaseOrder(String id) async {\n    await dio.delete('/purchase-orders/$id');\n  }\n\n  Future<PurchaseOrder?> getPurchaseOrderById(String id) async {\n    final res = await dio.get('/purchase-orders/$id');\n    if (res.data == null) return null;\n    return _mapToEntity(res.data as Map<String, dynamic>);\n  }\n\n  Future<List<PurchaseOrder>> getAllPurchaseOrders() async {\n    final res = await dio.get('/purchase-orders');\n    return (res.data as List)\n        .map((json) => _mapToEntity(json as Map<String, dynamic>))\n        .toList();\n  }\n\n  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId) async {\n    final res = await dio.post('/purchase-orders/$id/approve', data: {\n      'approvedByUserId': approverUserId,\n    });\n    return _mapToEntity(res.data as Map<String, dynamic>);\n  }\n\n  Future<PurchaseOrder> cancelPurchaseOrder(String id, String reason) async {\n    final res = await dio.post('/purchase-orders/$id/cancel', data: {\n      'reason': reason,\n    });\n    return _mapToEntity(res.data as Map<String, dynamic>);\n  }\n\n  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId) async {\n    final res = await dio.get('/purchase-orders', queryParameters: {\n      if (status != null) 'status': status,\n      if (supplierId != null) 'supplierId': supplierId,\n    });\n    return (res.data as List)\n        .map((json) => _mapToEntity(json as Map<String, dynamic>))\n        .toList();\n  }\n\n  /// -------- Mapping Helpers -------- ///\n\n  Map<String, dynamic> _mapFromEntity(PurchaseOrder order) {\n    return {\n      'id': order.id,\n      'supplierId': order.supplierId,\n      'createdByUserId': order.createdByUserId,\n      'approvedByUserId': order.approvedByUserId,\n      'goodsReceiptId': order.goodsReceiptId,\n      'invoiceId': order.invoiceId,\n      'totalAmount': order.totalAmount,\n      'attachments': order.attachments,\n      'createdAt': order.createdAt.toIso8601String(),\n      'expectedDeliveryDate': order.expectedDeliveryDate?.toIso8601String(),\n      'receivedDate': order.receivedDate?.toIso8601String(),\n      'status': order.status,\n      'items': order.items.map((item) => {\n        'stockId': item.stockId,\n        'quantityOrdered': item.quantityOrdered,\n        'quantityReceived': item.quantityReceived,\n        'unitCost': item.unitCost,\n      }).toList(),\n      'notes': order.notes,\n    };\n  }\n\n  PurchaseOrder _mapToEntity(Map<String, dynamic> json) {\n    return PurchaseOrder(\n      id: json['id'] as String,\n      supplierId: json['supplierId'] as String,\n      createdByUserId: json['createdByUserId'] as String,\n      approvedByUserId: json['approvedByUserId'] as String?,\n      goodsReceiptId: json['goodsReceiptId'] as String?,\n      invoiceId: json['invoiceId'] as String?,\n      totalAmount: (json['totalAmount'] as num).toDouble(),\n      attachments: (json['attachments'] as List?)?.map((a) => a as String).toList(),\n      createdAt: DateTime.parse(json['createdAt']),\n      expectedDeliveryDate: json['expectedDeliveryDate'] != null\n          ? DateTime.parse(json['expectedDeliveryDate'])\n          : null,\n      receivedDate: json['receivedDate'] != null\n          ? DateTime.parse(json['receivedDate'])\n          : null,\n      status: json['status'] as String,\n      items: (json['items'] as List).map((item) {\n        final map = item as Map<String, dynamic>;\n        return PurchaseOrderItem(\n          stockId: map['stockId'] as String,\n          quantityOrdered: map['quantityOrdered'] as int,\n          quantityReceived: map['quantityReceived'] as int?,\n          unitCost: (map['unitCost'] as num).toDouble(),\n        );\n      }).toList(),\n      notes: json['notes'] as String?,\n    );\n  }\n}\n","baseTimestamp":1755117807590,"deltas":[{"timestamp":1755118882107,"changes":[{"type":"DELETE","lineNumber":0,"oldContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';"},{"type":"MODIFY","lineNumber":1,"content":"import 'package:retrofit/retrofit.dart';","oldContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order_item.dart';"},{"type":"INSERT","lineNumber":2,"content":"import 'package:clean_arch_app/data/models/order/purchase_order_model.dart';"},{"type":"DELETE","lineNumber":4,"oldContent":"class PurchaseOrderApi {"},{"type":"DELETE","lineNumber":5,"oldContent":"  final Dio dio;"},{"type":"INSERT","lineNumber":4,"content":"part 'purchase_order_api.g.dart';"},{"type":"DELETE","lineNumber":7,"oldContent":"  PurchaseOrderApi(this.dio);"},{"type":"INSERT","lineNumber":6,"content":"@RestApi()"},{"type":"INSERT","lineNumber":7,"content":"abstract class PurchaseOrderApi {"},{"type":"INSERT","lineNumber":8,"content":"  factory PurchaseOrderApi(Dio dio, {String baseUrl}) = _PurchaseOrderApi;"},{"type":"DELETE","lineNumber":9,"oldContent":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":10,"oldContent":"    await dio.post('/purchase-orders', data: _mapFromEntity(order));"},{"type":"DELETE","lineNumber":11,"oldContent":"  }"},{"type":"INSERT","lineNumber":10,"content":"  @POST('/purchase-orders')"},{"type":"INSERT","lineNumber":11,"content":"  Future<void> createPurchaseOrder(@Body() PurchaseOrderModel order);"},{"type":"DELETE","lineNumber":13,"oldContent":"  Future<void> updatePurchaseOrder(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":14,"oldContent":"    await dio.put('/purchase-orders/${order.id}', data: _mapFromEntity(order));"},{"type":"DELETE","lineNumber":15,"oldContent":"  }"},{"type":"INSERT","lineNumber":13,"content":"  @PUT('/purchase-orders/{id}')"},{"type":"INSERT","lineNumber":14,"content":"  Future<void> updatePurchaseOrder("},{"type":"INSERT","lineNumber":15,"content":"      @Path(\"id\") String id,"},{"type":"INSERT","lineNumber":16,"content":"      @Body() PurchaseOrderModel order,"},{"type":"INSERT","lineNumber":17,"content":"      );"},{"type":"DELETE","lineNumber":17,"oldContent":"  Future<void> deletePurchaseOrder(String id) async {"},{"type":"DELETE","lineNumber":18,"oldContent":"    await dio.delete('/purchase-orders/$id');"},{"type":"MODIFY","lineNumber":19,"content":"  @DELETE('/purchase-orders/{id}')","oldContent":"  }"},{"type":"INSERT","lineNumber":20,"content":"  Future<void> deletePurchaseOrder(@Path(\"id\") String id);"},{"type":"DELETE","lineNumber":21,"oldContent":"  Future<PurchaseOrder?> getPurchaseOrderById(String id) async {"},{"type":"DELETE","lineNumber":22,"oldContent":"    final res = await dio.get('/purchase-orders/$id');"},{"type":"DELETE","lineNumber":23,"oldContent":"    if (res.data == null) return null;"},{"type":"DELETE","lineNumber":24,"oldContent":"    return _mapToEntity(res.data as Map<String, dynamic>);"},{"type":"DELETE","lineNumber":25,"oldContent":"  }"},{"type":"INSERT","lineNumber":22,"content":"  @GET('/purchase-orders/{id}')"},{"type":"INSERT","lineNumber":23,"content":"  Future<PurchaseOrderModel?> getPurchaseOrderById(@Path(\"id\") String id);"},{"type":"DELETE","lineNumber":27,"oldContent":"  Future<List<PurchaseOrder>> getAllPurchaseOrders() async {"},{"type":"DELETE","lineNumber":28,"oldContent":"    final res = await dio.get('/purchase-orders');"},{"type":"DELETE","lineNumber":29,"oldContent":"    return (res.data as List)"},{"type":"DELETE","lineNumber":30,"oldContent":"        .map((json) => _mapToEntity(json as Map<String, dynamic>))"},{"type":"DELETE","lineNumber":31,"oldContent":"        .toList();"},{"type":"DELETE","lineNumber":32,"oldContent":"  }"},{"type":"INSERT","lineNumber":25,"content":"  @GET('/purchase-orders')"},{"type":"INSERT","lineNumber":26,"content":"  Future<List<PurchaseOrderModel>> getAllPurchaseOrders();"},{"type":"DELETE","lineNumber":34,"oldContent":"  Future<PurchaseOrder> approvePurchaseOrder(String id, String approverUserId) async {"},{"type":"DELETE","lineNumber":35,"oldContent":"    final res = await dio.post('/purchase-orders/$id/approve', data: {"},{"type":"DELETE","lineNumber":36,"oldContent":"      'approvedByUserId': approverUserId,"},{"type":"DELETE","lineNumber":37,"oldContent":"    });"},{"type":"DELETE","lineNumber":38,"oldContent":"    return _mapToEntity(res.data as Map<String, dynamic>);"},{"type":"DELETE","lineNumber":39,"oldContent":"  }"},{"type":"INSERT","lineNumber":28,"content":"  @POST('/purchase-orders/{id}/approve')"},{"type":"INSERT","lineNumber":29,"content":"  Future<PurchaseOrderModel> approvePurchaseOrder("},{"type":"INSERT","lineNumber":30,"content":"      @Path(\"id\") String id,"},{"type":"INSERT","lineNumber":31,"content":"      @Field(\"approvedByUserId\") String approverUserId,"},{"type":"INSERT","lineNumber":32,"content":"      );"},{"type":"DELETE","lineNumber":41,"oldContent":"  Future<PurchaseOrder> cancelPurchaseOrder(String id, String reason) async {"},{"type":"DELETE","lineNumber":42,"oldContent":"    final res = await dio.post('/purchase-orders/$id/cancel', data: {"},{"type":"DELETE","lineNumber":43,"oldContent":"      'reason': reason,"},{"type":"DELETE","lineNumber":44,"oldContent":"    });"},{"type":"DELETE","lineNumber":45,"oldContent":"    return _mapToEntity(res.data as Map<String, dynamic>);"},{"type":"DELETE","lineNumber":46,"oldContent":"  }"},{"type":"INSERT","lineNumber":34,"content":"  @POST('/purchase-orders/{id}/cancel')"},{"type":"INSERT","lineNumber":35,"content":"  Future<PurchaseOrderModel> cancelPurchaseOrder("},{"type":"INSERT","lineNumber":36,"content":"      @Path(\"id\") String id,"},{"type":"INSERT","lineNumber":37,"content":"      @Field(\"reason\") String reason,"},{"type":"INSERT","lineNumber":38,"content":"      );"},{"type":"DELETE","lineNumber":48,"oldContent":"  Future<List<PurchaseOrder>> filterPurchaseOrders(String? status, String? supplierId) async {"},{"type":"DELETE","lineNumber":49,"oldContent":"    final res = await dio.get('/purchase-orders', queryParameters: {"},{"type":"DELETE","lineNumber":50,"oldContent":"      if (status != null) 'status': status,"},{"type":"DELETE","lineNumber":51,"oldContent":"      if (supplierId != null) 'supplierId': supplierId,"},{"type":"DELETE","lineNumber":52,"oldContent":"    });"},{"type":"DELETE","lineNumber":53,"oldContent":"    return (res.data as List)"},{"type":"DELETE","lineNumber":54,"oldContent":"        .map((json) => _mapToEntity(json as Map<String, dynamic>))"},{"type":"DELETE","lineNumber":55,"oldContent":"        .toList();"},{"type":"DELETE","lineNumber":56,"oldContent":"  }"},{"type":"DELETE","lineNumber":57,"oldContent":""},{"type":"DELETE","lineNumber":58,"oldContent":"  /// -------- Mapping Helpers -------- ///"},{"type":"DELETE","lineNumber":59,"oldContent":""},{"type":"DELETE","lineNumber":60,"oldContent":"  Map<String, dynamic> _mapFromEntity(PurchaseOrder order) {"},{"type":"DELETE","lineNumber":61,"oldContent":"    return {"},{"type":"DELETE","lineNumber":62,"oldContent":"      'id': order.id,"},{"type":"DELETE","lineNumber":63,"oldContent":"      'supplierId': order.supplierId,"},{"type":"DELETE","lineNumber":64,"oldContent":"      'createdByUserId': order.createdByUserId,"},{"type":"DELETE","lineNumber":65,"oldContent":"      'approvedByUserId': order.approvedByUserId,"},{"type":"DELETE","lineNumber":66,"oldContent":"      'goodsReceiptId': order.goodsReceiptId,"},{"type":"DELETE","lineNumber":67,"oldContent":"      'invoiceId': order.invoiceId,"},{"type":"DELETE","lineNumber":68,"oldContent":"      'totalAmount': order.totalAmount,"},{"type":"DELETE","lineNumber":69,"oldContent":"      'attachments': order.attachments,"},{"type":"DELETE","lineNumber":70,"oldContent":"      'createdAt': order.createdAt.toIso8601String(),"},{"type":"DELETE","lineNumber":71,"oldContent":"      'expectedDeliveryDate': order.expectedDeliveryDate?.toIso8601String(),"},{"type":"DELETE","lineNumber":72,"oldContent":"      'receivedDate': order.receivedDate?.toIso8601String(),"},{"type":"DELETE","lineNumber":73,"oldContent":"      'status': order.status,"},{"type":"DELETE","lineNumber":74,"oldContent":"      'items': order.items.map((item) => {"},{"type":"DELETE","lineNumber":75,"oldContent":"        'stockId': item.stockId,"},{"type":"DELETE","lineNumber":76,"oldContent":"        'quantityOrdered': item.quantityOrdered,"},{"type":"DELETE","lineNumber":77,"oldContent":"        'quantityReceived': item.quantityReceived,"},{"type":"DELETE","lineNumber":78,"oldContent":"        'unitCost': item.unitCost,"},{"type":"DELETE","lineNumber":79,"oldContent":"      }).toList(),"},{"type":"DELETE","lineNumber":80,"oldContent":"      'notes': order.notes,"},{"type":"DELETE","lineNumber":81,"oldContent":"    };"},{"type":"DELETE","lineNumber":82,"oldContent":"  }"},{"type":"DELETE","lineNumber":83,"oldContent":""},{"type":"DELETE","lineNumber":84,"oldContent":"  PurchaseOrder _mapToEntity(Map<String, dynamic> json) {"},{"type":"DELETE","lineNumber":85,"oldContent":"    return PurchaseOrder("},{"type":"DELETE","lineNumber":86,"oldContent":"      id: json['id'] as String,"},{"type":"DELETE","lineNumber":87,"oldContent":"      supplierId: json['supplierId'] as String,"},{"type":"DELETE","lineNumber":88,"oldContent":"      createdByUserId: json['createdByUserId'] as String,"},{"type":"DELETE","lineNumber":89,"oldContent":"      approvedByUserId: json['approvedByUserId'] as String?,"},{"type":"DELETE","lineNumber":90,"oldContent":"      goodsReceiptId: json['goodsReceiptId'] as String?,"},{"type":"DELETE","lineNumber":91,"oldContent":"      invoiceId: json['invoiceId'] as String?,"},{"type":"DELETE","lineNumber":92,"oldContent":"      totalAmount: (json['totalAmount'] as num).toDouble(),"},{"type":"DELETE","lineNumber":93,"oldContent":"      attachments: (json['attachments'] as List?)?.map((a) => a as String).toList(),"},{"type":"DELETE","lineNumber":94,"oldContent":"      createdAt: DateTime.parse(json['createdAt']),"},{"type":"DELETE","lineNumber":95,"oldContent":"      expectedDeliveryDate: json['expectedDeliveryDate'] != null"},{"type":"DELETE","lineNumber":96,"oldContent":"          ? DateTime.parse(json['expectedDeliveryDate'])"},{"type":"DELETE","lineNumber":97,"oldContent":"          : null,"},{"type":"DELETE","lineNumber":98,"oldContent":"      receivedDate: json['receivedDate'] != null"},{"type":"DELETE","lineNumber":99,"oldContent":"          ? DateTime.parse(json['receivedDate'])"},{"type":"DELETE","lineNumber":100,"oldContent":"          : null,"},{"type":"DELETE","lineNumber":101,"oldContent":"      status: json['status'] as String,"},{"type":"DELETE","lineNumber":102,"oldContent":"      items: (json['items'] as List).map((item) {"},{"type":"DELETE","lineNumber":103,"oldContent":"        final map = item as Map<String, dynamic>;"},{"type":"DELETE","lineNumber":104,"oldContent":"        return PurchaseOrderItem("},{"type":"DELETE","lineNumber":105,"oldContent":"          stockId: map['stockId'] as String,"},{"type":"DELETE","lineNumber":106,"oldContent":"          quantityOrdered: map['quantityOrdered'] as int,"},{"type":"DELETE","lineNumber":107,"oldContent":"          quantityReceived: map['quantityReceived'] as int?,"},{"type":"DELETE","lineNumber":108,"oldContent":"          unitCost: (map['unitCost'] as num).toDouble(),"},{"type":"DELETE","lineNumber":109,"oldContent":"        );"},{"type":"DELETE","lineNumber":110,"oldContent":"      }).toList(),"},{"type":"DELETE","lineNumber":111,"oldContent":"      notes: json['notes'] as String?,"},{"type":"DELETE","lineNumber":112,"oldContent":"    );"},{"type":"DELETE","lineNumber":113,"oldContent":"  }"},{"type":"INSERT","lineNumber":40,"content":"  @GET('/purchase-orders')"},{"type":"INSERT","lineNumber":41,"content":"  Future<List<PurchaseOrderModel>> filterPurchaseOrders("},{"type":"INSERT","lineNumber":42,"content":"      @Query(\"status\") String? status,"},{"type":"INSERT","lineNumber":43,"content":"      @Query(\"supplierId\") String? supplierId,"},{"type":"INSERT","lineNumber":44,"content":"      );"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/update_purchase_order_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/update_purchase_order_usecase.dart","baseContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass UpdatePurchaseOrderUseCase {\n  final PurchaseOrderRepository repository;\n\n  UpdatePurchaseOrderUseCase(this.repository);\n\n  Future<void> call(PurchaseOrder order) async {\n    return await repository.updatePurchaseOrder(order);\n  }\n}","baseTimestamp":1755117921184,"deltas":[{"timestamp":1755119255219,"changes":[{"type":"INSERT","lineNumber":0,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"INSERT","lineNumber":3,"content":"import 'package:dartz/dartz.dart';"},{"type":"DELETE","lineNumber":8,"oldContent":"  Future<void> call(PurchaseOrder order) async {"},{"type":"INSERT","lineNumber":10,"content":"  Future<Either<Failure>void> call(PurchaseOrder order) async {"}]},{"timestamp":1755119259830,"changes":[{"type":"MODIFY","lineNumber":4,"content":"","oldContent":""},{"type":"INSERT","lineNumber":10,"content":"  Future<Either<Failure,void> call(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":11,"oldContent":"  Future<Either<Failure>void> call(PurchaseOrder order) async {"}]},{"timestamp":1755119261838,"changes":[{"type":"INSERT","lineNumber":3,"content":"import 'package:dartz/dartz.dart';"},{"type":"DELETE","lineNumber":4,"oldContent":""},{"type":"MODIFY","lineNumber":10,"content":"  Future<Either<Failure,void>> call(PurchaseOrder order) async {","oldContent":"  Future<Either<Failure,void> call(PurchaseOrder order) async {"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/create_purchase_order_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/create_purchase_order_usecase.dart","baseContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass CreatePurchaseOrderUseCase {\n  final PurchaseOrderRepository repository;\n\n  CreatePurchaseOrderUseCase(this.repository);\n\n  Future<void> call(PurchaseOrder order) async {\n    return await repository.createPurchaseOrder(order);\n  }\n}\n","baseTimestamp":1755117934553,"deltas":[{"timestamp":1755119120852,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<Either<Failure,void>> call(PurchaseOrder order) async {","oldContent":"  Future<void> call(PurchaseOrder order) async {"}]},{"timestamp":1755119130954,"changes":[{"type":"INSERT","lineNumber":0,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"INSERT","lineNumber":3,"content":"import 'package:dartz/dartz.dart' show Either;"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/purchase_order/purchase_order_view_model.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/purchase_order/purchase_order_view_model.dart","baseContent":"class PurchaseOrderViewModel {\n  final PurchaseOrderUseCases purchaseOrderUseCases;\n  \n}","baseTimestamp":1755117969905,"deltas":[{"timestamp":1755118115386,"changes":[{"type":"MODIFY","lineNumber":0,"content":"// purchase_order_view_model.dart","oldContent":"class PurchaseOrderViewModel {"},{"type":"INSERT","lineNumber":1,"content":"import 'dart:async';"},{"type":"INSERT","lineNumber":2,"content":""},{"type":"INSERT","lineNumber":3,"content":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';"},{"type":"INSERT","lineNumber":4,"content":"import 'package:flutter_riverpod/flutter_riverpod.dart';"},{"type":"INSERT","lineNumber":5,"content":""},{"type":"INSERT","lineNumber":6,"content":"import '../../core/enums/purchase_order_status.dart';"},{"type":"INSERT","lineNumber":7,"content":"import '../../domain/entities/auth/permission_type.dart';"},{"type":"INSERT","lineNumber":8,"content":"import '../../domain/repositories/auth_repository.dart';"},{"type":"INSERT","lineNumber":9,"content":"import '../../domain/usecases/order/purchase_order_usecases.dart';"},{"type":"INSERT","lineNumber":10,"content":"import 'purchase_order_state.dart';"},{"type":"INSERT","lineNumber":11,"content":""},{"type":"INSERT","lineNumber":12,"content":"class PurchaseOrderViewModel extends StateNotifier<PurchaseOrderState> {"},{"type":"INSERT","lineNumber":14,"content":"  final AuthRepository authRepository;"},{"type":"INSERT","lineNumber":15,"content":"  Timer? _searchDebounce;"},{"type":"INSERT","lineNumber":16,"content":""},{"type":"INSERT","lineNumber":17,"content":"  PurchaseOrderViewModel({"},{"type":"INSERT","lineNumber":18,"content":"    required this.purchaseOrderUseCases,"},{"type":"INSERT","lineNumber":19,"content":"    required this.authRepository,"},{"type":"INSERT","lineNumber":20,"content":"  }) : super(PurchaseOrderState.initial()) {"},{"type":"INSERT","lineNumber":21,"content":"    _init();"},{"type":"INSERT","lineNumber":22,"content":"  }"},{"type":"INSERT","lineNumber":23,"content":""},{"type":"INSERT","lineNumber":24,"content":"  void _init() {"},{"type":"INSERT","lineNumber":25,"content":"    _loadCurrentUser();"},{"type":"INSERT","lineNumber":26,"content":"    loadPurchaseOrders();"},{"type":"INSERT","lineNumber":27,"content":"  }"},{"type":"INSERT","lineNumber":28,"content":""},{"type":"INSERT","lineNumber":29,"content":"  Future<void> _loadCurrentUser() async {"},{"type":"INSERT","lineNumber":30,"content":"    final res = await authRepository.getCurrentUser();"},{"type":"INSERT","lineNumber":31,"content":"    res.fold("},{"type":"INSERT","lineNumber":32,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to load user'),"},{"type":"INSERT","lineNumber":33,"content":"      (user) => state = state.copyWith(currentUser: user),"},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":35,"content":"  }"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":37,"content":"  bool hasPermission(PermissionType permission) =>"},{"type":"INSERT","lineNumber":38,"content":"      state.currentUser?.hasPermission(permission) ?? false;"},{"type":"INSERT","lineNumber":39,"content":""},{"type":"INSERT","lineNumber":40,"content":"  bool get canCreatePurchaseOrder => hasPermission(PermissionType.createPurchaseOrder);"},{"type":"INSERT","lineNumber":41,"content":"  bool get canApprovePurchaseOrder => hasPermission(PermissionType.approvePurchaseOrder);"},{"type":"INSERT","lineNumber":42,"content":"  bool get canCancelPurchaseOrder => hasPermission(PermissionType.cancelPurchaseOrder);"},{"type":"INSERT","lineNumber":43,"content":""},{"type":"INSERT","lineNumber":44,"content":"  Future<void> loadPurchaseOrders() async {"},{"type":"INSERT","lineNumber":45,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading, errorMessage: null);"},{"type":"INSERT","lineNumber":46,"content":""},{"type":"INSERT","lineNumber":47,"content":"    final result = await purchaseOrderUseCases.getAllPurchaseOrders();"},{"type":"INSERT","lineNumber":48,"content":"    result.fold("},{"type":"INSERT","lineNumber":49,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to load purchase orders'),"},{"type":"INSERT","lineNumber":50,"content":"      (orders) => state = state.copyWith(purchaseOrders: orders, status: PurchaseOrderStateStatus.success),"},{"type":"INSERT","lineNumber":51,"content":"    );"},{"type":"INSERT","lineNumber":52,"content":"  }"},{"type":"INSERT","lineNumber":53,"content":""},{"type":"INSERT","lineNumber":54,"content":"  Future<void> refresh() async => loadPurchaseOrders();"},{"type":"INSERT","lineNumber":55,"content":""},{"type":"INSERT","lineNumber":56,"content":"  void setSearchQuery(String query) {"},{"type":"INSERT","lineNumber":57,"content":"    _searchDebounce?.cancel();"},{"type":"INSERT","lineNumber":58,"content":"    _searchDebounce = Timer(const Duration(milliseconds: 300), () {"},{"type":"INSERT","lineNumber":59,"content":"      state = state.copyWith(searchQuery: query);"},{"type":"INSERT","lineNumber":60,"content":"    });"},{"type":"INSERT","lineNumber":61,"content":"  }"},{"type":"INSERT","lineNumber":62,"content":""},{"type":"INSERT","lineNumber":63,"content":"  void setFilterStatus(PurchaseOrderStatus? status) {"},{"type":"INSERT","lineNumber":64,"content":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":65,"content":"  }"},{"type":"INSERT","lineNumber":66,"content":""},{"type":"INSERT","lineNumber":67,"content":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"INSERT","lineNumber":68,"content":"    if (state.sortBy == sortBy) {"},{"type":"INSERT","lineNumber":69,"content":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"INSERT","lineNumber":71,"content":"          : PurchaseOrderSortOrder.ascending;"},{"type":"INSERT","lineNumber":72,"content":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"INSERT","lineNumber":73,"content":"    } else {"},{"type":"INSERT","lineNumber":74,"content":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"INSERT","lineNumber":75,"content":"    }"},{"type":"INSERT","lineNumber":76,"content":"  }"},{"type":"INSERT","lineNumber":77,"content":""},{"type":"INSERT","lineNumber":78,"content":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"INSERT","lineNumber":79,"content":"    if (!canCreatePurchaseOrder) {"},{"type":"INSERT","lineNumber":80,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":81,"content":"      return;"},{"type":"INSERT","lineNumber":82,"content":"    }"},{"type":"INSERT","lineNumber":83,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":84,"content":"    final result = await purchaseOrderUseCases.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":85,"content":"    result.fold("},{"type":"INSERT","lineNumber":86,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to create purchase order'),"},{"type":"INSERT","lineNumber":87,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":88,"content":"    );"},{"type":"INSERT","lineNumber":89,"content":"  }"},{"type":"INSERT","lineNumber":91,"content":"  Future<void> approvePurchaseOrder(String orderId) async {"},{"type":"INSERT","lineNumber":92,"content":"    if (!canApprovePurchaseOrder) {"},{"type":"INSERT","lineNumber":93,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":94,"content":"      return;"},{"type":"INSERT","lineNumber":95,"content":"    }"},{"type":"INSERT","lineNumber":96,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":97,"content":"    final result = await purchaseOrderUseCases.approvePurchaseOrder(orderId);"},{"type":"INSERT","lineNumber":98,"content":"    result.fold("},{"type":"INSERT","lineNumber":99,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to approve purchase order'),"},{"type":"INSERT","lineNumber":100,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":101,"content":"    );"},{"type":"INSERT","lineNumber":102,"content":"  }"},{"type":"INSERT","lineNumber":103,"content":""},{"type":"INSERT","lineNumber":104,"content":"  Future<void> cancelPurchaseOrder(String orderId) async {"},{"type":"INSERT","lineNumber":105,"content":"    if (!canCancelPurchaseOrder) {"},{"type":"INSERT","lineNumber":106,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":107,"content":"      return;"},{"type":"INSERT","lineNumber":108,"content":"    }"},{"type":"INSERT","lineNumber":109,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":110,"content":"    final result = await purchaseOrderUseCases.cancelPurchaseOrder(orderId);"},{"type":"INSERT","lineNumber":111,"content":"    result.fold("},{"type":"INSERT","lineNumber":112,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"INSERT","lineNumber":113,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":114,"content":"    );"},{"type":"INSERT","lineNumber":115,"content":"  }"},{"type":"INSERT","lineNumber":116,"content":""},{"type":"INSERT","lineNumber":117,"content":"  @override"},{"type":"INSERT","lineNumber":118,"content":"  void dispose() {"},{"type":"INSERT","lineNumber":119,"content":"    _searchDebounce?.cancel();"},{"type":"INSERT","lineNumber":120,"content":"    super.dispose();"},{"type":"INSERT","lineNumber":121,"content":"  }"},{"type":"INSERT","lineNumber":123,"content":""}]},{"timestamp":1755118365723,"changes":[{"type":"DELETE","lineNumber":2,"oldContent":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"DELETE","lineNumber":4,"oldContent":"  "},{"type":"DELETE","lineNumber":6,"oldContent":"}"},{"type":"DELETE","lineNumber":9,"oldContent":""},{"type":"DELETE","lineNumber":10,"oldContent":"  }"},{"type":"DELETE","lineNumber":12,"oldContent":"    super.dispose();"},{"type":"DELETE","lineNumber":14,"oldContent":"    _searchDebounce?.cancel();"},{"type":"DELETE","lineNumber":16,"oldContent":"  void dispose() {"},{"type":"DELETE","lineNumber":18,"oldContent":"  @override"},{"type":"DELETE","lineNumber":21,"oldContent":""},{"type":"DELETE","lineNumber":22,"oldContent":"  }"},{"type":"DELETE","lineNumber":24,"oldContent":"    );"},{"type":"DELETE","lineNumber":25,"oldContent":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":13,"content":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"DELETE","lineNumber":27,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"DELETE","lineNumber":29,"oldContent":"    result.fold("},{"type":"DELETE","lineNumber":31,"oldContent":"    final result = await purchaseOrderUseCases.cancelPurchaseOrder(orderId);"},{"type":"DELETE","lineNumber":33,"oldContent":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"DELETE","lineNumber":35,"oldContent":"    }"},{"type":"DELETE","lineNumber":37,"oldContent":"      return;"},{"type":"DELETE","lineNumber":39,"oldContent":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"DELETE","lineNumber":41,"oldContent":"    if (!canCancelPurchaseOrder) {"},{"type":"DELETE","lineNumber":43,"oldContent":"  Future<void> cancelPurchaseOrder(String orderId) async {"},{"type":"DELETE","lineNumber":45,"oldContent":""},{"type":"DELETE","lineNumber":47,"oldContent":"  }"},{"type":"DELETE","lineNumber":49,"oldContent":"    );"},{"type":"DELETE","lineNumber":51,"oldContent":"      (_) => loadPurchaseOrders(),"},{"type":"DELETE","lineNumber":53,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to approve purchase order'),"},{"type":"DELETE","lineNumber":55,"oldContent":"    result.fold("},{"type":"DELETE","lineNumber":57,"oldContent":"    final result = await purchaseOrderUseCases.approvePurchaseOrder(orderId);"},{"type":"DELETE","lineNumber":59,"oldContent":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"DELETE","lineNumber":61,"oldContent":"    }"},{"type":"DELETE","lineNumber":63,"oldContent":"      return;"},{"type":"DELETE","lineNumber":65,"oldContent":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"DELETE","lineNumber":67,"oldContent":"    if (!canApprovePurchaseOrder) {"},{"type":"DELETE","lineNumber":69,"oldContent":"  Future<void> approvePurchaseOrder(String orderId) async {"},{"type":"DELETE","lineNumber":71,"oldContent":"  }"},{"type":"DELETE","lineNumber":73,"oldContent":"    );"},{"type":"DELETE","lineNumber":75,"oldContent":"      (_) => loadPurchaseOrders(),"},{"type":"DELETE","lineNumber":77,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to create purchase order'),"},{"type":"DELETE","lineNumber":78,"oldContent":"  bool get canCreatePurchaseOrder => hasPermission(PermissionType.createPurchaseOrder);"},{"type":"DELETE","lineNumber":79,"oldContent":"    result.fold("},{"type":"DELETE","lineNumber":80,"oldContent":"  bool get canApprovePurchaseOrder => hasPermission(PermissionType.approvePurchaseOrder);"},{"type":"DELETE","lineNumber":81,"oldContent":"    final result = await purchaseOrderUseCases.createPurchaseOrder(order);"},{"type":"DELETE","lineNumber":82,"oldContent":"  bool get canCancelPurchaseOrder => hasPermission(PermissionType.cancelPurchaseOrder);"},{"type":"DELETE","lineNumber":83,"oldContent":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":40,"content":"  bool get canCreatePurchaseOrder => hasPermission(PermissionType.createOrder);"},{"type":"INSERT","lineNumber":41,"content":"  bool get canApprovePurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"INSERT","lineNumber":42,"content":"  bool get canCancelPurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"DELETE","lineNumber":85,"oldContent":"    }"},{"type":"DELETE","lineNumber":87,"oldContent":"      return;"},{"type":"DELETE","lineNumber":89,"oldContent":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"DELETE","lineNumber":91,"oldContent":"    if (!canCreatePurchaseOrder) {"},{"type":"DELETE","lineNumber":93,"oldContent":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":95,"oldContent":""},{"type":"DELETE","lineNumber":97,"oldContent":"  }"},{"type":"DELETE","lineNumber":99,"oldContent":"    }"},{"type":"DELETE","lineNumber":101,"oldContent":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"DELETE","lineNumber":103,"oldContent":"    } else {"},{"type":"DELETE","lineNumber":105,"oldContent":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"DELETE","lineNumber":107,"oldContent":"          : PurchaseOrderSortOrder.ascending;"},{"type":"DELETE","lineNumber":109,"oldContent":"          ? PurchaseOrderSortOrder.descending"},{"type":"DELETE","lineNumber":111,"oldContent":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"DELETE","lineNumber":113,"oldContent":"    if (state.sortBy == sortBy) {"},{"type":"DELETE","lineNumber":115,"oldContent":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"DELETE","lineNumber":117,"oldContent":""},{"type":"DELETE","lineNumber":120,"oldContent":"  }"},{"type":"DELETE","lineNumber":121,"oldContent":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":64,"content":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":65,"content":"  }"},{"type":"INSERT","lineNumber":66,"content":""},{"type":"INSERT","lineNumber":67,"content":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"INSERT","lineNumber":68,"content":"    if (state.sortBy == sortBy) {"},{"type":"INSERT","lineNumber":69,"content":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"INSERT","lineNumber":71,"content":"          : PurchaseOrderSortOrder.ascending;"},{"type":"INSERT","lineNumber":72,"content":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"INSERT","lineNumber":73,"content":"    } else {"},{"type":"INSERT","lineNumber":74,"content":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"INSERT","lineNumber":75,"content":"    }"},{"type":"INSERT","lineNumber":76,"content":"  }"},{"type":"INSERT","lineNumber":77,"content":""},{"type":"INSERT","lineNumber":78,"content":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"INSERT","lineNumber":79,"content":"    if (!canCreatePurchaseOrder) {"},{"type":"INSERT","lineNumber":80,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":81,"content":"      return;"},{"type":"INSERT","lineNumber":82,"content":"    }"},{"type":"INSERT","lineNumber":83,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":84,"content":"    final result = await purchaseOrderUseCases.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":85,"content":"    result.fold("},{"type":"INSERT","lineNumber":86,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to create purchase order'),"},{"type":"INSERT","lineNumber":87,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":88,"content":"    );"},{"type":"INSERT","lineNumber":89,"content":"  }"},{"type":"INSERT","lineNumber":90,"content":"  "},{"type":"INSERT","lineNumber":91,"content":"  Future<void> approvePurchaseOrder(String orderId) async {"},{"type":"INSERT","lineNumber":92,"content":"    if (!canApprovePurchaseOrder) {"},{"type":"INSERT","lineNumber":93,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":94,"content":"      return;"},{"type":"INSERT","lineNumber":95,"content":"    }"},{"type":"INSERT","lineNumber":96,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":97,"content":"    final result = await purchaseOrderUseCases.approvePurchaseOrder(orderId, state.currentUser!.id);"},{"type":"INSERT","lineNumber":98,"content":"    result.fold("},{"type":"INSERT","lineNumber":99,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to approve purchase order'),"},{"type":"INSERT","lineNumber":100,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":101,"content":"    );"},{"type":"INSERT","lineNumber":102,"content":"  }"},{"type":"INSERT","lineNumber":103,"content":""},{"type":"INSERT","lineNumber":104,"content":"  Future<void> cancelPurchaseOrder(String orderId, String reason) async {"},{"type":"INSERT","lineNumber":105,"content":"    if (!canCancelPurchaseOrder) {"},{"type":"INSERT","lineNumber":106,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":107,"content":"      return;"},{"type":"INSERT","lineNumber":108,"content":"    }"},{"type":"INSERT","lineNumber":109,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":110,"content":"    final result = await purchaseOrderUseCases.cancelPurchaseOrder(orderId, reason);"},{"type":"INSERT","lineNumber":111,"content":"    result.fold("},{"type":"INSERT","lineNumber":112,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"INSERT","lineNumber":113,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":114,"content":"    );"},{"type":"INSERT","lineNumber":115,"content":"  }"},{"type":"INSERT","lineNumber":116,"content":""},{"type":"INSERT","lineNumber":117,"content":"  @override"},{"type":"INSERT","lineNumber":118,"content":"  void dispose() {"},{"type":"INSERT","lineNumber":119,"content":"    _searchDebounce?.cancel();"},{"type":"INSERT","lineNumber":120,"content":"    super.dispose();"},{"type":"INSERT","lineNumber":121,"content":"  }"},{"type":"INSERT","lineNumber":122,"content":"}"},{"type":"INSERT","lineNumber":123,"content":""}]},{"timestamp":1755119353032,"changes":[{"type":"DELETE","lineNumber":7,"oldContent":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"INSERT","lineNumber":13,"content":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"DELETE","lineNumber":21,"oldContent":"  bool get canCreatePurchaseOrder => hasPermission(PermissionType.createOrder);"},{"type":"DELETE","lineNumber":23,"oldContent":"  bool get canApprovePurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"DELETE","lineNumber":24,"oldContent":"  bool get canCancelPurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"DELETE","lineNumber":36,"oldContent":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":37,"content":"  bool hasPermission(PermissionType permission) =>"},{"type":"INSERT","lineNumber":38,"content":"      state.currentUser?.hasPermission(permission) ?? false;"},{"type":"INSERT","lineNumber":39,"content":""},{"type":"INSERT","lineNumber":40,"content":"  bool get canCreatePurchaseOrder => hasPermission(PermissionType.createOrder);"},{"type":"INSERT","lineNumber":41,"content":"  bool get canApprovePurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"INSERT","lineNumber":42,"content":"  bool get canCancelPurchaseOrder => hasPermission(PermissionType.approveOrder);"},{"type":"INSERT","lineNumber":43,"content":""},{"type":"INSERT","lineNumber":44,"content":"  Future<void> loadPurchaseOrders() async {"},{"type":"INSERT","lineNumber":45,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading, errorMessage: null);"},{"type":"INSERT","lineNumber":46,"content":""},{"type":"INSERT","lineNumber":47,"content":"    final result = await purchaseOrderUseCases.getAllPurchaseOrders();"},{"type":"INSERT","lineNumber":48,"content":"    result.fold("},{"type":"INSERT","lineNumber":49,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to load purchase orders'),"},{"type":"INSERT","lineNumber":50,"content":"      (orders) => state = state.copyWith(purchaseOrders: orders, status: PurchaseOrderStateStatus.success),"},{"type":"INSERT","lineNumber":52,"content":"  }"},{"type":"INSERT","lineNumber":53,"content":""},{"type":"INSERT","lineNumber":54,"content":"  Future<void> refresh() async => loadPurchaseOrders();"},{"type":"INSERT","lineNumber":55,"content":""},{"type":"INSERT","lineNumber":56,"content":"  void setSearchQuery(String query) {"},{"type":"INSERT","lineNumber":57,"content":"    _searchDebounce?.cancel();"},{"type":"INSERT","lineNumber":58,"content":"    _searchDebounce = Timer(const Duration(milliseconds: 300), () {"},{"type":"INSERT","lineNumber":59,"content":"      state = state.copyWith(searchQuery: query);"},{"type":"INSERT","lineNumber":60,"content":"    });"},{"type":"INSERT","lineNumber":61,"content":"  }"},{"type":"INSERT","lineNumber":62,"content":""},{"type":"INSERT","lineNumber":63,"content":"  void setFilterStatus(PurchaseOrderStatus? status) {"},{"type":"INSERT","lineNumber":64,"content":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":65,"content":"  }"},{"type":"INSERT","lineNumber":66,"content":""},{"type":"DELETE","lineNumber":43,"oldContent":"  }"},{"type":"DELETE","lineNumber":46,"oldContent":""},{"type":"DELETE","lineNumber":49,"oldContent":"  bool hasPermission(PermissionType permission) =>"},{"type":"DELETE","lineNumber":52,"oldContent":"      state.currentUser?.hasPermission(permission) ?? false;"},{"type":"DELETE","lineNumber":56,"oldContent":""},{"type":"DELETE","lineNumber":64,"oldContent":""},{"type":"DELETE","lineNumber":67,"oldContent":"  Future<void> loadPurchaseOrders() async {"},{"type":"DELETE","lineNumber":70,"oldContent":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading, errorMessage: null);"},{"type":"DELETE","lineNumber":73,"oldContent":""},{"type":"DELETE","lineNumber":76,"oldContent":"    final result = await purchaseOrderUseCases.getAllPurchaseOrders();"},{"type":"DELETE","lineNumber":79,"oldContent":"    result.fold("},{"type":"DELETE","lineNumber":82,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to load purchase orders'),"},{"type":"DELETE","lineNumber":85,"oldContent":"      (orders) => state = state.copyWith(purchaseOrders: orders, status: PurchaseOrderStateStatus.success),"},{"type":"DELETE","lineNumber":89,"oldContent":"    );"},{"type":"DELETE","lineNumber":91,"oldContent":"  }"},{"type":"DELETE","lineNumber":94,"oldContent":""},{"type":"DELETE","lineNumber":97,"oldContent":"  Future<void> refresh() async => loadPurchaseOrders();"},{"type":"DELETE","lineNumber":100,"oldContent":""},{"type":"DELETE","lineNumber":103,"oldContent":"  void setSearchQuery(String query) {"},{"type":"DELETE","lineNumber":104,"oldContent":"    result.fold("},{"type":"DELETE","lineNumber":105,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"DELETE","lineNumber":106,"oldContent":"    _searchDebounce?.cancel();"},{"type":"DELETE","lineNumber":107,"oldContent":"      (_) => loadPurchaseOrders(),"},{"type":"DELETE","lineNumber":108,"oldContent":"    );"},{"type":"DELETE","lineNumber":109,"oldContent":"    _searchDebounce = Timer(const Duration(milliseconds: 300), () {"},{"type":"INSERT","lineNumber":111,"content":"    "},{"type":"DELETE","lineNumber":112,"oldContent":"      state = state.copyWith(searchQuery: query);"},{"type":"DELETE","lineNumber":115,"oldContent":"    });"},{"type":"DELETE","lineNumber":117,"oldContent":"  }"},{"type":"DELETE","lineNumber":122,"oldContent":""},{"type":"DELETE","lineNumber":123,"oldContent":"  void setFilterStatus(PurchaseOrderStatus? status) {"}]},{"timestamp":1755119356159,"changes":[{"type":"MODIFY","lineNumber":13,"content":"  final PurchaseOrderUseCases purchaseOrderUseCases;","oldContent":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"DELETE","lineNumber":31,"oldContent":"    );"},{"type":"DELETE","lineNumber":34,"oldContent":"  bool hasPermission(PermissionType permission) =>"},{"type":"DELETE","lineNumber":36,"oldContent":"      state.currentUser?.hasPermission(permission) ?? false;"},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":37,"content":"  bool hasPermission(PermissionType permission) =>"},{"type":"INSERT","lineNumber":38,"content":"      state.currentUser?.hasPermission(permission) ?? false;"},{"type":"DELETE","lineNumber":41,"oldContent":"    );"},{"type":"DELETE","lineNumber":43,"oldContent":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"DELETE","lineNumber":45,"oldContent":"    if (state.sortBy == sortBy) {"},{"type":"DELETE","lineNumber":48,"oldContent":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"DELETE","lineNumber":50,"oldContent":"          ? PurchaseOrderSortOrder.descending"},{"type":"DELETE","lineNumber":53,"oldContent":"          : PurchaseOrderSortOrder.ascending;"},{"type":"DELETE","lineNumber":55,"oldContent":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"DELETE","lineNumber":58,"oldContent":"    } else {"},{"type":"DELETE","lineNumber":59,"oldContent":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"INSERT","lineNumber":51,"content":"    );"},{"type":"DELETE","lineNumber":62,"oldContent":"    }"},{"type":"DELETE","lineNumber":64,"oldContent":"  }"},{"type":"DELETE","lineNumber":66,"oldContent":""},{"type":"DELETE","lineNumber":69,"oldContent":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"DELETE","lineNumber":71,"oldContent":"    if (!canCreatePurchaseOrder) {"},{"type":"DELETE","lineNumber":73,"oldContent":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"DELETE","lineNumber":75,"oldContent":"      return;"},{"type":"DELETE","lineNumber":77,"oldContent":"    }"},{"type":"DELETE","lineNumber":79,"oldContent":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"DELETE","lineNumber":81,"oldContent":"    final result = await purchaseOrderUseCases.createPurchaseOrder(order);"},{"type":"DELETE","lineNumber":84,"oldContent":"    result.fold("},{"type":"INSERT","lineNumber":67,"content":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"INSERT","lineNumber":68,"content":"    if (state.sortBy == sortBy) {"},{"type":"INSERT","lineNumber":69,"content":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"INSERT","lineNumber":71,"content":"          : PurchaseOrderSortOrder.ascending;"},{"type":"INSERT","lineNumber":72,"content":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"INSERT","lineNumber":73,"content":"    } else {"},{"type":"INSERT","lineNumber":74,"content":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"INSERT","lineNumber":75,"content":"    }"},{"type":"INSERT","lineNumber":76,"content":"  }"},{"type":"INSERT","lineNumber":77,"content":""},{"type":"INSERT","lineNumber":78,"content":"  Future<void> createPurchaseOrder(PurchaseOrder order) async {"},{"type":"INSERT","lineNumber":79,"content":"    if (!canCreatePurchaseOrder) {"},{"type":"INSERT","lineNumber":80,"content":"      state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Permission denied');"},{"type":"INSERT","lineNumber":81,"content":"      return;"},{"type":"INSERT","lineNumber":82,"content":"    }"},{"type":"INSERT","lineNumber":83,"content":"    state = state.copyWith(status: PurchaseOrderStateStatus.loading);"},{"type":"INSERT","lineNumber":84,"content":"    final result = await purchaseOrderUseCases.createPurchaseOrder(order);"},{"type":"INSERT","lineNumber":85,"content":"    result.fold("},{"type":"INSERT","lineNumber":111,"content":"    result.fold("},{"type":"INSERT","lineNumber":112,"content":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"INSERT","lineNumber":113,"content":"      (_) => loadPurchaseOrders(),"},{"type":"INSERT","lineNumber":114,"content":"    );"},{"type":"DELETE","lineNumber":112,"oldContent":"    "}]},{"timestamp":1755119358444,"changes":[{"type":"INSERT","lineNumber":12,"content":"class PurchaseOrderViewModel extends StateNotifier<PurchaseOrderState> {"},{"type":"DELETE","lineNumber":13,"oldContent":"  final PurchaseOrderUseCases purchaseOrderUseCases;"},{"type":"DELETE","lineNumber":33,"oldContent":"    );"},{"type":"DELETE","lineNumber":35,"oldContent":"  bool hasPermission(PermissionType permission) =>"},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":37,"content":"  bool hasPermission(PermissionType permission) =>"},{"type":"DELETE","lineNumber":39,"oldContent":""},{"type":"DELETE","lineNumber":46,"oldContent":"    );"},{"type":"INSERT","lineNumber":51,"content":"    );"},{"type":"DELETE","lineNumber":56,"oldContent":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"MODIFY","lineNumber":58,"content":"    _searchDebounce = Timer(const Duration(milliseconds: 300), () {","oldContent":"    if (state.sortBy == sortBy) {"},{"type":"INSERT","lineNumber":59,"content":"      state = state.copyWith(searchQuery: query);"},{"type":"INSERT","lineNumber":60,"content":"    });"},{"type":"INSERT","lineNumber":61,"content":"  }"},{"type":"INSERT","lineNumber":62,"content":""},{"type":"INSERT","lineNumber":63,"content":"  void setFilterStatus(PurchaseOrderStatus? status) {"},{"type":"INSERT","lineNumber":64,"content":"    state = state.copyWith(filterStatus: status);"},{"type":"INSERT","lineNumber":65,"content":"  }"},{"type":"INSERT","lineNumber":66,"content":""},{"type":"INSERT","lineNumber":67,"content":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"INSERT","lineNumber":68,"content":"    if (state.sortBy == sortBy) {"},{"type":"DELETE","lineNumber":62,"oldContent":"    _searchDebounce = Timer(const Duration(milliseconds: 300), () {"},{"type":"DELETE","lineNumber":65,"oldContent":"      state = state.copyWith(searchQuery: query);"},{"type":"DELETE","lineNumber":68,"oldContent":"    });"},{"type":"DELETE","lineNumber":71,"oldContent":"  }"},{"type":"DELETE","lineNumber":74,"oldContent":""},{"type":"DELETE","lineNumber":77,"oldContent":"  void setFilterStatus(PurchaseOrderStatus? status) {"},{"type":"DELETE","lineNumber":80,"oldContent":"    state = state.copyWith(filterStatus: status);"},{"type":"DELETE","lineNumber":82,"oldContent":"  }"},{"type":"DELETE","lineNumber":85,"oldContent":""},{"type":"MODIFY","lineNumber":111,"content":"    ","oldContent":"    result.fold("},{"type":"DELETE","lineNumber":113,"oldContent":"      (failure) => state = state.copyWith(status: PurchaseOrderStateStatus.error, errorMessage: 'Failed to cancel purchase order'),"},{"type":"DELETE","lineNumber":114,"oldContent":"      (_) => loadPurchaseOrders(),"},{"type":"DELETE","lineNumber":116,"oldContent":"    );"}]},{"timestamp":1755119360599,"changes":[{"type":"DELETE","lineNumber":33,"oldContent":"    );"},{"type":"DELETE","lineNumber":35,"oldContent":""},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"MODIFY","lineNumber":51,"content":"    );","oldContent":"    );"},{"type":"INSERT","lineNumber":57,"content":"    _searchDebounce?.cancel();"},{"type":"DELETE","lineNumber":59,"oldContent":"    _searchDebounce?.cancel();"},{"type":"DELETE","lineNumber":61,"oldContent":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"DELETE","lineNumber":63,"oldContent":"          ? PurchaseOrderSortOrder.descending"},{"type":"DELETE","lineNumber":66,"oldContent":"          : PurchaseOrderSortOrder.ascending;"},{"type":"DELETE","lineNumber":68,"oldContent":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"DELETE","lineNumber":71,"oldContent":"    } else {"},{"type":"DELETE","lineNumber":73,"oldContent":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"INSERT","lineNumber":69,"content":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"INSERT","lineNumber":71,"content":"          : PurchaseOrderSortOrder.ascending;"},{"type":"INSERT","lineNumber":72,"content":"      state = state.copyWith(sortOrder: newOrder);"},{"type":"INSERT","lineNumber":73,"content":"    } else {"},{"type":"INSERT","lineNumber":74,"content":"      state = state.copyWith(sortBy: sortBy, sortOrder: PurchaseOrderSortOrder.ascending);"},{"type":"MODIFY","lineNumber":111,"content":"        (_) => loadPurchaseOrders(),","oldContent":"    "},{"type":"INSERT","lineNumber":112,"content":""}]},{"timestamp":1755119364964,"changes":[{"type":"DELETE","lineNumber":33,"oldContent":"    );"},{"type":"DELETE","lineNumber":35,"oldContent":""},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":50,"content":"      (orders) => state = state.copyWith(purchaseOrders: orders, status: PurchaseOrderStateStatus.success),"},{"type":"DELETE","lineNumber":51,"oldContent":"    );"},{"type":"DELETE","lineNumber":65,"oldContent":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"MODIFY","lineNumber":67,"content":"  void setSortBy(PurchaseOrderSortBy sortBy) {","oldContent":"          ? PurchaseOrderSortOrder.descending"},{"type":"INSERT","lineNumber":68,"content":"    if (state.sortBy == sortBy) {"},{"type":"INSERT","lineNumber":69,"content":"      final newOrder = state.sortOrder == PurchaseOrderSortOrder.ascending"},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"DELETE","lineNumber":71,"oldContent":"  void setSortBy(PurchaseOrderSortBy sortBy) {"},{"type":"DELETE","lineNumber":74,"oldContent":"    if (state.sortBy == sortBy) {"}]},{"timestamp":1755119374396,"changes":[{"type":"DELETE","lineNumber":33,"oldContent":"    );"},{"type":"DELETE","lineNumber":35,"oldContent":""},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":66,"content":""},{"type":"DELETE","lineNumber":68,"oldContent":""},{"type":"MODIFY","lineNumber":71,"content":"          : PurchaseOrderSortOrder.ascending;","oldContent":"          : PurchaseOrderSortOrder.ascending;"},{"type":"MODIFY","lineNumber":111,"content":"        loadPurchaseOrders(),","oldContent":"        (_) => loadPurchaseOrders(),"}]},{"timestamp":1755119378663,"changes":[{"type":"DELETE","lineNumber":33,"oldContent":"    );"},{"type":"DELETE","lineNumber":35,"oldContent":""},{"type":"INSERT","lineNumber":34,"content":"    );"},{"type":"INSERT","lineNumber":36,"content":""},{"type":"INSERT","lineNumber":70,"content":"          ? PurchaseOrderSortOrder.descending"},{"type":"DELETE","lineNumber":71,"oldContent":"          : PurchaseOrderSortOrder.ascending;"},{"type":"MODIFY","lineNumber":111,"content":"        loadPurchaseOrders();","oldContent":"        loadPurchaseOrders(),"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/purchase_order/purchase_order_state.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/purchase_order/purchase_order_state.dart","baseContent":"// purchase_order_state.dart\nimport 'package:clean_arch_app/domain/entities/auth/user.dart';\nimport 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/core/enums/purchase_order_status.dart';\n\nenum PurchaseOrderSortBy { orderDate, deliveryDate, totalAmount }\nenum PurchaseOrderSortOrder { ascending, descending }\nenum PurchaseOrderStateStatus { initial, loading, success, error }\n\nclass PurchaseOrderState {\n  final List<PurchaseOrder> purchaseOrders;\n  final User? currentUser;\n\n  final bool isLoading;\n  final bool isBulkSelectionMode;\n  final PurchaseOrderStateStatus status;\n  final Set<String> selectedPurchaseOrderIds;\n  final String searchQuery;\n  final PurchaseOrderStatus? filterStatus;\n  final PurchaseOrderSortBy sortBy;\n  final PurchaseOrderSortOrder sortOrder;\n  final String? errorMessage;\n\n  const PurchaseOrderState({\n    this.purchaseOrders = const [],\n    this.currentUser,\n    this.status = PurchaseOrderStateStatus.initial,\n    this.selectedPurchaseOrderIds = const {},\n    this.searchQuery = '',\n    this.filterStatus,\n    this.sortBy = PurchaseOrderSortBy.orderDate,\n    this.sortOrder = PurchaseOrderSortOrder.descending,\n    this.errorMessage,\n    this.isLoading = false,\n    this.isBulkSelectionMode = false,\n  });\n\n  factory PurchaseOrderState.initial() => const PurchaseOrderState();\n\n  PurchaseOrderState copyWith({\n    List<PurchaseOrder>? purchaseOrders,\n    User? currentUser,\n    PurchaseOrderStateStatus? status,\n    Set<String>? selectedPurchaseOrderIds,\n    String? searchQuery,\n    PurchaseOrderStatus? filterStatus,\n    PurchaseOrderSortBy? sortBy,\n    PurchaseOrderSortOrder? sortOrder,\n    String? errorMessage,\n    bool? isLoading,\n    bool? isBulkSelectionMode,\n  }) {\n    return PurchaseOrderState(\n      purchaseOrders: purchaseOrders ?? this.purchaseOrders,\n      currentUser: currentUser ?? this.currentUser,\n      status: status ?? this.status,\n      selectedPurchaseOrderIds: selectedPurchaseOrderIds ?? this.selectedPurchaseOrderIds,\n      searchQuery: searchQuery ?? this.searchQuery,\n      filterStatus: filterStatus ?? this.filterStatus,\n      sortBy: sortBy ?? this.sortBy,\n      sortOrder: sortOrder ?? this.sortOrder,\n      errorMessage: errorMessage ?? this.errorMessage,\n      isLoading: isLoading ?? this.isLoading,\n      isBulkSelectionMode: isBulkSelectionMode ?? this.isBulkSelectionMode,\n    );\n  }\n\n  bool get hasSelection => selectedPurchaseOrderIds.isNotEmpty;\n  int get selectedCount => selectedPurchaseOrderIds.length;\n  bool get allSelected => purchaseOrders.isNotEmpty && selectedPurchaseOrderIds.length == purchaseOrders.length;\n\n  List<PurchaseOrder> get filteredPurchaseOrders {\n    var list = List<PurchaseOrder>.from(purchaseOrders);\n\n    if (searchQuery.isNotEmpty) {\n      list = list.where((order) =>\n          order.id.toLowerCase().contains(searchQuery.toLowerCase())).toList();\n    }\n\n    if (filterStatus != null) {\n      list = list.where((order) => order.status == filterStatus!.name).toList();\n    }\n\n    list.sort((a, b) {\n      int cmp = 0;\n      switch (sortBy) {\n        case PurchaseOrderSortBy.orderDate:\n          cmp = a.createdAt.compareTo(b.createdAt);\n          break;\n        case PurchaseOrderSortBy.deliveryDate:\n          cmp = (a.expectedDeliveryDate ?? DateTime(0)).compareTo(b.expectedDeliveryDate ?? DateTime(0));\n          break;\n        case PurchaseOrderSortBy.totalAmount:\n          cmp = a.totalAmount.compareTo(b.totalAmount);\n          break;\n      }\n      return sortOrder == PurchaseOrderSortOrder.ascending ? cmp : -cmp;\n    });\n\n    return list;\n  }\n}\n","baseTimestamp":1755118263234},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/approve_purchase_order_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/approve_purchase_order_usecase.dart","baseContent":"\nimport 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\nimport 'package:dartz/dartz.dart';\n\nclass ApprovePurchaseOrderUseCase {\n  final PurchaseOrderRepository repository;\n\n  ApprovePurchaseOrderUseCase(this.repository);\n\n  Future<Either<>PurchaseOrder> call(String id,String userId) {\n    return repository.approvePurchaseOrder(id ,userId);\n  }\n}\n","baseTimestamp":1755119086905,"deltas":[{"timestamp":1755119096301,"changes":[{"type":"INSERT","lineNumber":1,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"MODIFY","lineNumber":11,"content":"  Future<Either<Failure,PurchaseOrder> call(String id,String userId) {","oldContent":"  Future<Either<>PurchaseOrder> call(String id,String userId) {"}]},{"timestamp":1755119099347,"changes":[{"type":"DELETE","lineNumber":11,"oldContent":"  Future<Either<>PurchaseOrder> call(String id,String userId) {"},{"type":"MODIFY","lineNumber":11,"content":"  Future<Either<Failure,PurchaseOrder>> call(String id,String userId) {","oldContent":"  Future<Either<Failure,PurchaseOrder> call(String id,String userId) {"},{"type":"INSERT","lineNumber":12,"content":"    return repository.approvePurchaseOrder(id ,userId);"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/delete_purchase_order_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/delete_purchase_order_usecase.dart","baseContent":"import 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass DeletePurchaseOrderUseCase {\n  final PurchaseOrderRepository repository;\n\n  DeletePurchaseOrderUseCase(this.repository);\n\n  Future<Either<Failure,PurchaseOrder>>  call(String id) async {\n    return await repository.deletePurchaseOrder(id);\n  }\n}\n","baseTimestamp":1755119138646,"deltas":[{"timestamp":1755119141931,"changes":[{"type":"MODIFY","lineNumber":7,"content":"  Future<Either<Failure,void>>  call(String id) async {","oldContent":"  Future<Either<Failure,PurchaseOrder>>  call(String id) async {"}]},{"timestamp":1755119144957,"changes":[{"type":"INSERT","lineNumber":2,"content":"import '../../../core/error/failures.dart' show Failure;"},{"type":"INSERT","lineNumber":3,"content":""}]},{"timestamp":1755119147090,"changes":[{"type":"INSERT","lineNumber":1,"content":"import 'package:dartz/dartz.dart';"},{"type":"DELETE","lineNumber":3,"oldContent":"class DeletePurchaseOrderUseCase {"},{"type":"INSERT","lineNumber":5,"content":"class DeletePurchaseOrderUseCase {"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/filter_purchase_orders_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/filter_purchase_orders_usecase.dart","baseContent":"\nimport 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\nimport 'package:dartz/dartz.dart';\n\nclass FilterPurchaseOrdersUseCase {\n  final PurchaseOrderRepository repository;\n\n  FilterPurchaseOrdersUseCase(this.repository);\n\n  Future<Either<>List<PurchaseOrder>> call({String? status, String? supplierId}) {\n    return repository.filterPurchaseOrders(status,  supplierId);\n  }\n}\n","baseTimestamp":1755119160938,"deltas":[{"timestamp":1755119168525,"changes":[{"type":"INSERT","lineNumber":1,"content":"import 'package:clean_arch_app/core/error/failures.dart';"},{"type":"MODIFY","lineNumber":11,"content":"  Future<Either<Failure,List<PurchaseOrder>> call({String? status, String? supplierId}) {","oldContent":"  Future<Either<>List<PurchaseOrder>> call({String? status, String? supplierId}) {"}]},{"timestamp":1755119171959,"changes":[{"type":"DELETE","lineNumber":11,"oldContent":"  Future<Either<>List<PurchaseOrder>> call({String? status, String? supplierId}) {"},{"type":"MODIFY","lineNumber":11,"content":"  Future<Either<Failure,List<PurchaseOrder>>> call({String? status, String? supplierId}) {","oldContent":"  Future<Either<Failure,List<PurchaseOrder>> call({String? status, String? supplierId}) {"},{"type":"INSERT","lineNumber":12,"content":"    return repository.filterPurchaseOrders(status,  supplierId);"}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/get_all_purchase_orders_usecase.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/domain/usecases/order/get_all_purchase_orders_usecase.dart","baseContent":"import 'package:clean_arch_app/domain/entities/order/purchase_order.dart';\nimport 'package:clean_arch_app/domain/repositories/purchase_order_repository.dart';\n\nclass GetAllPurchaseOrdersUseCase {\n  final PurchaseOrderRepository repository;\n\n  GetAllPurchaseOrdersUseCase(this.repository);\n\n  Future<Either<F><List<PurchaseOrder>> call() async {\n    return await repository.getAllPurchaseOrders();\n  }\n}\n","baseTimestamp":1755119187254,"deltas":[{"timestamp":1755119193196,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<Either<Failure, List<PurchaseOrder>>> call() async {><List<PurchaseOrder>> call() async {","oldContent":"  Future<Either<F><List<PurchaseOrder>> call() async {"}]},{"timestamp":1755119198610,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<Either<Failure, List<PurchaseOrder>>> call() async { ><List<PurchaseOrder>> call() async {","oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> call() async {><List<PurchaseOrder>> call() async {"}]},{"timestamp":1755119206513,"changes":[{"type":"MODIFY","lineNumber":8,"content":"  Future<Either<Failure, List<PurchaseOrder>>> call() async { ","oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> call() async { ><List<PurchaseOrder>> call() async {"}]},{"timestamp":1755119216801,"changes":[{"type":"INSERT","lineNumber":0,"content":"import 'package:clean_arch_app/core/error/failures.dart';"}]},{"timestamp":1755119219503,"changes":[{"type":"INSERT","lineNumber":3,"content":"import 'package:dartz/dartz.dart';"}]},{"timestamp":1755119441468,"changes":[{"type":"MODIFY","lineNumber":10,"content":"  Future<Either<Failure, List<PurchaseOrder>>> call() async {","oldContent":"  Future<Either<Failure, List<PurchaseOrder>>> call() async { "}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/common/widgets/main_scaffold.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/presentation/common/widgets/main_scaffold.dart","baseContent":"// lib/presentation/core/main_scaffold_final_with_blur_overlay.dart\nimport 'dart:ui';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_lucide/flutter_lucide.dart';\nimport 'package:flutter_riverpod/flutter_riverpod.dart';\nimport 'package:flutter_speed_dial/flutter_speed_dial.dart';\nimport 'package:go_router/go_router.dart';\n\nclass MainScaffold extends ConsumerStatefulWidget {\n  final Widget child;\n  const MainScaffold({super.key, required this.child});\n\n  @override\n  ConsumerState<MainScaffold> createState() => _MainScaffoldState();\n}\n\nclass _MainScaffoldState extends ConsumerState<MainScaffold> {\n  late int _selectedIndex;\n\n  // ValueNotifier controls SpeedDial open/close and overlay visibility\n  final ValueNotifier<bool> _dialOpen = ValueNotifier<bool>(false);\n\n  static const List<_NavItem> _navItems = [\n    _NavItem(icon: Icons.inventory, label: 'Stock', route: '/stock'),\n    _NavItem(icon: Icons.receipt_long, label: 'Purchase', route: '/purchase-order'),\n    _NavItem(icon: Icons.insert_chart_outlined, label: 'Reporting', route: '/reporting'),\n    _NavItem(icon: Icons.timeline, label: 'Activities', route: '/activity'),\n  ];\n\n  @override\n  void didChangeDependencies() {\n    super.didChangeDependencies();\n    // Use GoRouter location for robust current-path detection\n    final loc = GoRouter.of(context).location; // e.g. \"/stock/123\"\n    final idx = _navItems.indexWhere((i) => loc.startsWith(i.route));\n    _selectedIndex = idx == -1 ? 0 : idx;\n  }\n\n  @override\n  void dispose() {\n    _dialOpen.dispose();\n    super.dispose();\n  }\n\n  void _onItemTapped(int index) {\n    if (_selectedIndex == index) return;\n    setState(() => _selectedIndex = index);\n    context.go(_navItems[index].route);\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final theme = Theme.of(context);\n\n    // Layout constants (small, tidy)\n    const double navHeight = 60.0;\n    const double indicatorWidth = 60.0;\n    const double indicatorHeight = 34.0;\n    const double iconSize = 18.0;\n    const double fabDiameter = 48.0;\n    const double fabIconSize = 18.0;\n    final Color activeColor = theme.colorScheme.primary;\n    final Color inactiveColor = theme.colorScheme.onSurface.withOpacity(0.68);\n\n    return Scaffold(\n      // Body in a Stack so custom overlay sits above content\n      body: Stack(\n        children: [\n          widget.child,\n\n          // Frosted overlay when SpeedDial is open (subtle glass)\n          ValueListenableBuilder<bool>(\n            valueListenable: _dialOpen,\n            builder: (context, open, _) {\n              if (!open) return const SizedBox.shrink();\n              return Positioned.fill(\n                child: GestureDetector(\n                  behavior: HitTestBehavior.opaque,\n                  onTap: () => _dialOpen.value = false,\n                  child: AnimatedOpacity(\n                    duration: const Duration(milliseconds: 200),\n                    opacity: 1.0,\n                    child: BackdropFilter(\n                      // reduced blur for a lighter glass effect\n                      filter: ImageFilter.blur(sigmaX: 3.5, sigmaY: 3.5),\n                      child: Container(\n                        color: theme.colorScheme.surface.withOpacity(0.12), // slight tint\n                      ),\n                    ),\n                  ),\n                ),\n              );\n            },\n          ),\n        ],\n      ),\n\n      // main floating action (SpeedDial)\n      floatingActionButton: _buildFab(theme, fabDiameter, fabIconSize),\n      floatingActionButtonLocation: FloatingActionButtonLocation.miniEndFloat,\n\n      // Bottom navigation bar  frosted, compact, minimal\n      bottomNavigationBar: SafeArea(\n        top: false,\n        child: Padding(\n          padding: const EdgeInsets.fromLTRB(12, 8, 12, 8),\n          child: ClipRRect(\n            borderRadius: BorderRadius.circular(14),\n            child: BackdropFilter(\n              // subtle blur on the bottom bar\n              filter: ImageFilter.blur(sigmaX: 3.0, sigmaY: 3.0),\n              child: Material(\n                color: theme.colorScheme.surface.withOpacity(0.92),\n                child: BottomAppBar(\n                  elevation: 0,\n                  notchMargin: 8,\n                  shape: const CircularNotchedRectangle(),\n                  color: Colors.transparent,\n                  child: SizedBox(\n                    height: navHeight,\n                    child: Stack(\n                      alignment: Alignment.center,\n                      children: [\n                        // Moving rounded indicator behind the active item\n                        AnimatedAlign(\n                          alignment: _alignmentForIndex(_selectedIndex, _navItems.length),\n                          duration: const Duration(milliseconds: 300),\n                          curve: Curves.easeOutCubic,\n                          child: Padding(\n                            padding: const EdgeInsets.only(bottom: 6),\n                            child: AnimatedContainer(\n                              duration: const Duration(milliseconds: 220),\n                              width: indicatorWidth,\n                              height: indicatorHeight,\n                              decoration: BoxDecoration(\n                                color: activeColor.withOpacity(0.10),\n                                borderRadius: BorderRadius.circular(indicatorHeight / 2),\n                              ),\n                            ),\n                          ),\n                        ),\n\n                        // Nav items (equally spaced)\n                        Row(\n                          mainAxisAlignment: MainAxisAlignment.spaceAround,\n                          children: List.generate(_navItems.length, (i) {\n                            final item = _navItems[i];\n                            final selected = i == _selectedIndex;\n                            return _BottomNavItem(\n                              icon: item.icon,\n                              label: item.label,\n                              selected: selected,\n                              activeColor: activeColor,\n                              inactiveColor: inactiveColor,\n                              onTap: () => _onItemTapped(i),\n                              iconSize: iconSize,\n                            );\n                          }),\n                        ),\n                      ],\n                    ),\n                  ),\n                ),\n              ),\n            ),\n          ),\n        ),\n      ),\n    );\n  }\n\n  // FAB / SpeedDial builder\n  Widget _buildFab(ThemeData theme, double diameter, double iconSize) {\n    final actions = <_ActionItem>[\n      _ActionItem(icon: LucideIcons.scan, label: 'Scan Barcode', route: '/scan'),\n      _ActionItem(icon: Icons.inventory_2_outlined, label: 'New Stock Take', route: '/new-stock-take'),\n      _ActionItem(icon: Icons.precision_manufacturing, label: 'New Production Run', route: '/new-production'),\n      _ActionItem(icon: Icons.article_outlined, label: 'New Bill of Material', route: '/new-bom'),\n      _ActionItem(icon: Icons.shopping_cart_outlined, label: 'New Customer Order', route: '/new-order'),\n    ];\n\n    Widget _buildLabel(BuildContext ctx, IconData icon, String label) {\n      final t = Theme.of(ctx);\n      return ClipRRect(\n        borderRadius: BorderRadius.circular(12),\n        child: BackdropFilter(\n          filter: ImageFilter.blur(sigmaX: 6, sigmaY: 6),\n          child: Container(\n            padding: const EdgeInsets.symmetric(vertical: 8, horizontal: 12),\n            color: t.colorScheme.surface.withOpacity(0.65),\n            child: Row(\n              mainAxisSize: MainAxisSize.min,\n              children: [\n                Icon(icon, size: 16, color: t.colorScheme.onSurface.withOpacity(0.95)),\n                const SizedBox(width: 10),\n                Text(label, style: TextStyle(fontSize: 14, fontWeight: FontWeight.w600, color: t.colorScheme.onSurface)),\n              ],\n            ),\n          ),\n        ),\n      );\n    }\n\n    final sdChildren = actions.map((a) {\n      return SpeedDialChild(\n        child: const SizedBox.shrink(), // we only show labelWidget\n        labelWidget: _buildLabel(context, a.icon, a.label),\n        backgroundColor: Colors.transparent,\n        labelBackgroundColor: Colors.transparent,\n        onTap: () {\n          _dialOpen.value = false;\n          GoRouter.of(context).push(a.route);\n        },\n      );\n    }).toList();\n\n    final fabChild = Container(\n      width: diameter,\n      height: diameter,\n      decoration: BoxDecoration(\n        color: theme.colorScheme.primary,\n        shape: BoxShape.circle,\n        boxShadow: [BoxShadow(color: Colors.black.withOpacity(0.12), blurRadius: 8, offset: const Offset(0, 3))],\n      ),\n      child: Center(child: Icon(LucideIcons.plus, size: iconSize, color: Colors.white)),\n    );\n\n    final activeChild = Container(\n      width: diameter,\n      height: diameter,\n      decoration: BoxDecoration(\n        color: theme.colorScheme.primary,\n        shape: BoxShape.circle,\n      ),\n      child: Center(child: Icon(Icons.close, size: iconSize, color: Colors.white)),\n    );\n\n    return SpeedDial(\n      icon: null,\n      child: fabChild,\n      activeChild: activeChild,\n      openCloseDial: _dialOpen,\n      onOpen: () => _dialOpen.value = true,\n      onClose: () => _dialOpen.value = false,\n      backgroundColor: Colors.transparent,\n      foregroundColor: Colors.white,\n      overlayOpacity: 0.0, // we manage our own overlay\n      curve: Curves.easeInOut,\n      elevation: 0,\n      shape: const CircleBorder(),\n      useRotationAnimation: true,\n      animationDuration: const Duration(milliseconds: 240),\n      children: sdChildren,\n    );\n  }\n\n  Alignment _alignmentForIndex(int index, int total) {\n    if (total <= 1) return Alignment.center;\n    final frac = index / (total - 1);\n    final ax = (frac * 2) - 1;\n    return Alignment(ax, 0);\n  }\n}\n\n// Reusable widgets and models\n\nclass _BottomNavItem extends StatelessWidget {\n  final IconData icon;\n  final String label;\n  final bool selected;\n  final Color activeColor;\n  final Color inactiveColor;\n  final VoidCallback onTap;\n  final double iconSize;\n\n  const _BottomNavItem({\n    Key? key,\n    required this.icon,\n    required this.label,\n    required this.selected,\n    required this.activeColor,\n    required this.inactiveColor,\n    required this.onTap,\n    required this.iconSize,\n  }) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Expanded(\n      child: InkWell(\n        onTap: onTap,\n        child: SizedBox(\n          height: double.infinity,\n          child: Column(\n            mainAxisAlignment: MainAxisAlignment.center,\n            children: [\n              Icon(icon, size: iconSize, color: selected ? activeColor : inactiveColor),\n              const SizedBox(height: 4),\n              AnimatedDefaultTextStyle(\n                duration: const Duration(milliseconds: 200),\n                style: TextStyle(\n                  fontSize: 11,\n                  fontWeight: selected ? FontWeight.w700 : FontWeight.w600,\n                  color: selected ? activeColor : inactiveColor,\n                ),\n                child: Text(label),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n}\n\nclass _NavItem {\n  final IconData icon;\n  final String label;\n  final String route;\n  const _NavItem({required this.icon, required this.label, required this.route});\n}\n\nclass _ActionItem {\n  final IconData icon;\n  final String label;\n  final String route;\n  const _ActionItem({required this.icon, required this.label, required this.route});\n}\n","baseTimestamp":1755121384821,"deltas":[{"timestamp":1755128577407,"changes":[{"type":"MODIFY","lineNumber":6,"content":"  final Widget child;","oldContent":"import 'package:go_router/go_router.dart';"},{"type":"INSERT","lineNumber":7,"content":"  const MainScaffold({super.key, required this.child});"},{"type":"DELETE","lineNumber":8,"oldContent":"class MainScaffold extends ConsumerStatefulWidget {"},{"type":"MODIFY","lineNumber":17,"content":"","oldContent":"  late int _selectedIndex;"},{"type":"MODIFY","lineNumber":20,"content":"    _NavItem(icon: Icons.car, label: 'Purchase Order', route: '/health'),","oldContent":"    _NavItem(icon: Icons., label: 'Purchase Order', route: '/health'),"},{"type":"DELETE","lineNumber":24,"oldContent":"    setState(() {"},{"type":"MODIFY","lineNumber":26,"content":"    setState(() {","oldContent":"      _selectedIndex = index;"},{"type":"INSERT","lineNumber":27,"content":"      _selectedIndex = index;"},{"type":"INSERT","lineNumber":30,"content":"  }"},{"type":"INSERT","lineNumber":31,"content":""},{"type":"INSERT","lineNumber":33,"content":"  Widget build(BuildContext context) {"},{"type":"INSERT","lineNumber":34,"content":"    final theme = Theme.of(context);"},{"type":"INSERT","lineNumber":35,"content":""},{"type":"INSERT","lineNumber":36,"content":"    return Scaffold("},{"type":"DELETE","lineNumber":32,"oldContent":"  }"},{"type":"DELETE","lineNumber":35,"oldContent":"  @override"},{"type":"DELETE","lineNumber":37,"oldContent":"  Widget build(BuildContext context) {"},{"type":"DELETE","lineNumber":38,"oldContent":"    final theme = Theme.of(context);"},{"type":"DELETE","lineNumber":40,"oldContent":""},{"type":"DELETE","lineNumber":42,"oldContent":"    return Scaffold("},{"type":"DELETE","lineNumber":143,"oldContent":"  final String route;"},{"type":"DELETE","lineNumber":144,"oldContent":"  const _ActionItem({required this.icon, required this.label, required this.route});"},{"type":"DELETE","lineNumber":145,"oldContent":"}"},{"type":"DELETE","lineNumber":146,"oldContent":""}]},{"timestamp":1755128625736,"changes":[{"type":"MODIFY","lineNumber":0,"content":"import 'package:flutter/material.dart';","oldContent":"// lib/presentation/core/main_scaffold_final_with_blur_overlay.dart"},{"type":"MODIFY","lineNumber":4,"content":"","oldContent":"import 'package:flutter_speed_dial/flutter_speed_dial.dart';"},{"type":"MODIFY","lineNumber":8,"content":"","oldContent":"class MainScaffold extends ConsumerStatefulWidget {"},{"type":"MODIFY","lineNumber":20,"content":"    _NavItem(icon: Icons.cameraswitch_rounded, label: 'Purchase Order', route: '/health'),","oldContent":"    _NavItem(icon: Icons.car, label: 'Purchase Order', route: '/health'),"},{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: LucideIcons.user, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.inventory, label: 'Stock', route: '/stock'),"},{"type":"INSERT","lineNumber":25,"content":"  void _onItemTapped(int index) {"},{"type":"DELETE","lineNumber":27,"oldContent":"  void _onItemTapped(int index) {"},{"type":"DELETE","lineNumber":31,"oldContent":"  void didChangeDependencies() {"},{"type":"DELETE","lineNumber":33,"oldContent":"      body: widget.child,"},{"type":"INSERT","lineNumber":32,"content":"  @override"},{"type":"DELETE","lineNumber":35,"oldContent":"      floatingActionButton: _buildFab(theme, 56, 28),"},{"type":"MODIFY","lineNumber":37,"content":"      body: widget.child,","oldContent":"      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,"},{"type":"INSERT","lineNumber":38,"content":"      floatingActionButton: _buildFab(theme, 56, 28),"},{"type":"INSERT","lineNumber":39,"content":"      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,"},{"type":"MODIFY","lineNumber":69,"content":"                      ),","oldContent":"          // Frosted overlay when SpeedDial is open (subtle glass)"},{"type":"MODIFY","lineNumber":72,"content":"                ),","oldContent":"            builder: (context, open, _) {"},{"type":"MODIFY","lineNumber":77,"content":"      ),","oldContent":"                  onTap: () => _dialOpen.value = false,"},{"type":"DELETE","lineNumber":88,"oldContent":"                  ),"},{"type":"DELETE","lineNumber":89,"oldContent":"                ),"},{"type":"DELETE","lineNumber":90,"oldContent":"              );"},{"type":"INSERT","lineNumber":88,"content":""},{"type":"INSERT","lineNumber":89,"content":"    return SpeedDial("},{"type":"INSERT","lineNumber":90,"content":"      icon: null,"},{"type":"MODIFY","lineNumber":100,"content":"          ),","oldContent":"      // Bottom navigation bar  frosted, compact, minimal"},{"type":"MODIFY","lineNumber":102,"content":"        ),","oldContent":"        top: false,"}]},{"timestamp":1755128632899,"changes":[{"type":"MODIFY","lineNumber":1,"content":"import 'package:flutter_lucide/flutter_lucide.dart';","oldContent":"import 'dart:ui';"},{"type":"MODIFY","lineNumber":9,"content":"  @override","oldContent":"  const MainScaffold({super.key, required this.child});"},{"type":"MODIFY","lineNumber":32,"content":"  @override","oldContent":"  @override"},{"type":"INSERT","lineNumber":35,"content":""},{"type":"INSERT","lineNumber":36,"content":"    return Scaffold("},{"type":"DELETE","lineNumber":37,"oldContent":""},{"type":"DELETE","lineNumber":39,"oldContent":"    return Scaffold("},{"type":"MODIFY","lineNumber":68,"content":"                        selected ? Colors.cyanAccent : Colors.white70,","oldContent":""},{"type":"MODIFY","lineNumber":71,"content":"                  ],","oldContent":"            valueListenable: _dialOpen,"},{"type":"MODIFY","lineNumber":85,"content":"      _ActionItem(icon: LucideIcons.pencil, label: 'Add activity', route: '/activity'),","oldContent":"                        color: theme.colorScheme.surface.withOpacity(0.12), // slight tint"},{"type":"DELETE","lineNumber":104,"oldContent":"          padding: const EdgeInsets.fromLTRB(12, 8, 12, 8),"},{"type":"DELETE","lineNumber":105,"oldContent":"          child: ClipRRect("},{"type":"INSERT","lineNumber":104,"content":"      openCloseDial: _dialOpen,"},{"type":"INSERT","lineNumber":105,"content":"      overlayOpacity: 0.5,"}]},{"timestamp":1755128637996,"changes":[{"type":"MODIFY","lineNumber":11,"content":"}","oldContent":"  @override"},{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.bar_chart_sharp, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.bar_chart_sharp, label: '', route: '/stats'),"},{"type":"INSERT","lineNumber":31,"content":""},{"type":"DELETE","lineNumber":32,"oldContent":"  @override"},{"type":"MODIFY","lineNumber":37,"content":"      body: widget.child,","oldContent":"      body: widget.child,"},{"type":"MODIFY","lineNumber":70,"content":"                    ),","oldContent":"          ValueListenableBuilder<bool>("},{"type":"MODIFY","lineNumber":74,"content":"            }),","oldContent":"              return Positioned.fill("},{"type":"MODIFY","lineNumber":76,"content":"        ),","oldContent":"                  behavior: HitTestBehavior.opaque,"},{"type":"MODIFY","lineNumber":84,"content":"      _ActionItem(icon: LucideIcons.weight, label: 'Add weight', route: '/weight'),","oldContent":"                      child: Container("},{"type":"MODIFY","lineNumber":86,"content":"      _ActionItem(icon: Icons.run_circle_outlined, label: 'Track workout', route: '/workout'),","oldContent":"                      ),"},{"type":"DELETE","lineNumber":92,"oldContent":"          ),"},{"type":"DELETE","lineNumber":93,"oldContent":"        ],"},{"type":"INSERT","lineNumber":92,"content":"        duration: const Duration(milliseconds: 250),"},{"type":"INSERT","lineNumber":93,"content":"        turns: _dialOpen.value ? 0.125 : 0,"},{"type":"MODIFY","lineNumber":103,"content":"      ),","oldContent":"        child: Padding("}]},{"timestamp":1755128644183,"changes":[{"type":"MODIFY","lineNumber":2,"content":"import 'package:flutter_speed_dial/flutter_speed_dial.dart';","oldContent":"import 'package:flutter/material.dart';"},{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons., label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.bar_chart_sharp, label: 'Reporting', route: '/stats'),"},{"type":"INSERT","lineNumber":36,"content":"    return Scaffold("},{"type":"DELETE","lineNumber":37,"oldContent":"      body: widget.child,"},{"type":"MODIFY","lineNumber":73,"content":"              );","oldContent":"              if (!open) return const SizedBox.shrink();"},{"type":"MODIFY","lineNumber":91,"content":"      child: AnimatedRotation(","oldContent":"            },"},{"type":"DELETE","lineNumber":126,"oldContent":"                          curve: Curves.easeOutCubic,"},{"type":"DELETE","lineNumber":127,"oldContent":"                          child: Padding("},{"type":"DELETE","lineNumber":128,"oldContent":"                            padding: const EdgeInsets.only(bottom: 6),"},{"type":"INSERT","lineNumber":126,"content":"class _NavItem {"},{"type":"INSERT","lineNumber":127,"content":"  final IconData icon;"},{"type":"INSERT","lineNumber":128,"content":"  final String label;"},{"type":"MODIFY","lineNumber":132,"content":"}","oldContent":"                              height: indicatorHeight,"},{"type":"DELETE","lineNumber":134,"oldContent":"                                color: activeColor.withOpacity(0.10),"},{"type":"DELETE","lineNumber":135,"oldContent":"                                borderRadius: BorderRadius.circular(indicatorHeight / 2),"},{"type":"INSERT","lineNumber":134,"content":"class _ActionItem {"},{"type":"INSERT","lineNumber":135,"content":"  final IconData icon;"}]},{"timestamp":1755128648600,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.repo, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons., label: 'Reporting', route: '/stats'),"},{"type":"MODIFY","lineNumber":75,"content":"          ),","oldContent":"                child: GestureDetector("}]},{"timestamp":1755128658195,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.repor, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.repo, label: 'Reporting', route: '/stats'),"},{"type":"MODIFY","lineNumber":133,"content":"","oldContent":"                              decoration: BoxDecoration("},{"type":"MODIFY","lineNumber":139,"content":"  _ActionItem(","oldContent":"                        ),"}]},{"timestamp":1755128661013,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.report, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.repor, label: 'Reporting', route: '/stats'),"},{"type":"MODIFY","lineNumber":87,"content":"    ];","oldContent":"                    ),"}]},{"timestamp":1755128670687,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.rea, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.report, label: 'Reporting', route: '/stats'),"},{"type":"MODIFY","lineNumber":140,"content":"      {required this.icon, required this.label, required this.route});","oldContent":""}]},{"timestamp":1755128692690,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons., label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.rea, label: 'Reporting', route: '/stats'),"}]},{"timestamp":1755128728871,"changes":[{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.b, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons., label: 'Reporting', route: '/stats'),"},{"type":"DELETE","lineNumber":143,"oldContent":""}]},{"timestamp":1755128735235,"changes":[{"type":"MODIFY","lineNumber":3,"content":"import 'package:go_router/go_router.dart';","oldContent":"import 'package:flutter_lucide/flutter_lucide.dart';"},{"type":"MODIFY","lineNumber":19,"content":"    _NavItem(icon: Icons.inventory_outlined, label: 'Stock', route: '/'),","oldContent":"  // ValueNotifier controls SpeedDial open/close and overlay visibility"},{"type":"MODIFY","lineNumber":21,"content":"    _NavItem(icon: Icons.bar_chart_sharp, label: 'Reporting', route: '/stats'),","oldContent":"    _NavItem(icon: Icons.b, label: 'Reporting', route: '/stats'),"}]},{"timestamp":1755128740200,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: LucideIcons., label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: LucideIcons.user, label: 'Profile', route: '/profile'),"}]},{"timestamp":1755128743188,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: LucideIcons.eme, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: LucideIcons., label: 'Profile', route: '/profile'),"}]},{"timestamp":1755128751603,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.emer, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: LucideIcons.eme, label: 'Profile', route: '/profile'),"},{"type":"MODIFY","lineNumber":124,"content":"}","oldContent":"                        AnimatedAlign("}]},{"timestamp":1755128756847,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.ac, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.emer, label: 'Profile', route: '/profile'),"},{"type":"MODIFY","lineNumber":125,"content":"","oldContent":"                          alignment: _alignmentForIndex(_selectedIndex, _navItems.length),"},{"type":"MODIFY","lineNumber":131,"content":"  _NavItem({required this.icon, required this.label, required this.route});","oldContent":"                              duration: const Duration(milliseconds: 220),"}]},{"timestamp":1755128758849,"changes":[{"type":"MODIFY","lineNumber":12,"content":"","oldContent":"  @override"},{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.act, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.ac, label: 'Profile', route: '/profile'),"},{"type":"MODIFY","lineNumber":79,"content":"  }","oldContent":"                  child: AnimatedOpacity("},{"type":"MODIFY","lineNumber":81,"content":"  Widget _buildFab(ThemeData theme, double diameter, double iconSize) {","oldContent":"                    opacity: 1.0,"},{"type":"MODIFY","lineNumber":83,"content":"      _ActionItem(icon: LucideIcons.activity, label: 'Add blood pressure', route: '/bp'),","oldContent":"                      // reduced blur for a lighter glass effect"},{"type":"MODIFY","lineNumber":130,"content":"","oldContent":"                            child: AnimatedContainer("},{"type":"MODIFY","lineNumber":137,"content":"  final String route;","oldContent":"                              ),"},{"type":"MODIFY","lineNumber":142,"content":"","oldContent":"                        // Nav items (equally spaced)"}]},{"timestamp":1755128772081,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.his, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.act, label: 'Profile', route: '/profile'),"},{"type":"MODIFY","lineNumber":80,"content":"","oldContent":"                    duration: const Duration(milliseconds: 200),"}]},{"timestamp":1755128783386,"changes":[{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.history_outlined, label: 'Profile', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.his, label: 'Profile', route: '/profile'),"},{"type":"MODIFY","lineNumber":78,"content":"    );","oldContent":"                  onTap: () => _dialOpen.value = false,"},{"type":"MODIFY","lineNumber":82,"content":"    final actions = <_ActionItem>[","oldContent":"                    child: BackdropFilter("},{"type":"DELETE","lineNumber":122,"oldContent":"                      children: ["},{"type":"DELETE","lineNumber":123,"oldContent":"                        // Moving rounded indicator behind the active item"},{"type":"INSERT","lineNumber":122,"content":"    );"},{"type":"INSERT","lineNumber":123,"content":"  }"},{"type":"MODIFY","lineNumber":129,"content":"  final String route;","oldContent":"                            padding: const EdgeInsets.only(bottom: 6),"},{"type":"MODIFY","lineNumber":136,"content":"  final String label;","oldContent":"                                borderRadius: BorderRadius.circular(indicatorHeight / 2),"},{"type":"INSERT","lineNumber":141,"content":"}"},{"type":"DELETE","lineNumber":142,"oldContent":""}]},{"timestamp":1755128791330,"changes":[{"type":"MODIFY","lineNumber":5,"content":"class MainScaffold extends StatefulWidget {","oldContent":"import 'package:flutter_speed_dial/flutter_speed_dial.dart';"},{"type":"MODIFY","lineNumber":10,"content":"  State<MainScaffold> createState() => _MainScaffoldState();","oldContent":"  const MainScaffold({super.key, required this.child});"},{"type":"MODIFY","lineNumber":13,"content":"class _MainScaffoldState extends State<MainScaffold> {","oldContent":"  ConsumerState<MainScaffold> createState() => _MainScaffoldState();"},{"type":"MODIFY","lineNumber":16,"content":"  int _selectedIndex = 0;","oldContent":"class _MainScaffoldState extends ConsumerState<MainScaffold> {"},{"type":"MODIFY","lineNumber":18,"content":"  final List<_NavItem> _navItems = [","oldContent":""},{"type":"MODIFY","lineNumber":22,"content":"    _NavItem(icon: Icons.history_outlined, label: 'activity', route: '/profile'),","oldContent":"    _NavItem(icon: Icons.history_outlined, label: 'Profile', route: '/profile'),"},{"type":"DELETE","lineNumber":28,"oldContent":"    _NavItem(icon: Icons.insert_chart_outlined, label: 'Reporting', route: '/reporting'),"},{"type":"MODIFY","lineNumber":28,"content":"    });","oldContent":"  ];"},{"type":"INSERT","lineNumber":29,"content":"    GoRouter.of(context).go(_navItems[index].route);"},{"type":"DELETE","lineNumber":40,"oldContent":"    // Use GoRouter location for robust current-path detection"},{"type":"DELETE","lineNumber":41,"oldContent":"    final idx = _navItems.indexWhere((i) => loc.startsWith(i.route));"},{"type":"DELETE","lineNumber":42,"oldContent":"    _selectedIndex = idx == -1 ? 0 : idx;"},{"type":"DELETE","lineNumber":43,"oldContent":"  }"},{"type":"DELETE","lineNumber":44,"oldContent":""},{"type":"DELETE","lineNumber":45,"oldContent":"  void dispose() {"},{"type":"DELETE","lineNumber":46,"oldContent":"    super.dispose();"},{"type":"DELETE","lineNumber":47,"oldContent":""},{"type":"DELETE","lineNumber":48,"oldContent":"    if (_selectedIndex == index) return;"},{"type":"DELETE","lineNumber":49,"oldContent":"    context.go(_navItems[index].route);"},{"type":"DELETE","lineNumber":50,"oldContent":""},{"type":"DELETE","lineNumber":51,"oldContent":"  @override"},{"type":"DELETE","lineNumber":52,"oldContent":"  Widget build(BuildContext context) {"},{"type":"DELETE","lineNumber":53,"oldContent":"    final theme = Theme.of(context);"},{"type":"DELETE","lineNumber":54,"oldContent":""},{"type":"DELETE","lineNumber":55,"oldContent":"    // Layout constants (small, tidy)"},{"type":"DELETE","lineNumber":56,"oldContent":"    const double navHeight = 60.0;"},{"type":"DELETE","lineNumber":57,"oldContent":"    const double indicatorWidth = 60.0;"},{"type":"DELETE","lineNumber":58,"oldContent":"    const double indicatorHeight = 34.0;"},{"type":"DELETE","lineNumber":59,"oldContent":"    const double iconSize = 18.0;"},{"type":"DELETE","lineNumber":60,"oldContent":"    const double fabDiameter = 48.0;"},{"type":"DELETE","lineNumber":61,"oldContent":"    final Color activeColor = theme.colorScheme.primary;"},{"type":"DELETE","lineNumber":62,"oldContent":"    final Color inactiveColor = theme.colorScheme.onSurface.withOpacity(0.68);"},{"type":"DELETE","lineNumber":63,"oldContent":""},{"type":"DELETE","lineNumber":64,"oldContent":"    return Scaffold("},{"type":"DELETE","lineNumber":65,"oldContent":"      // Body in a Stack so custom overlay sits above content"},{"type":"DELETE","lineNumber":66,"oldContent":"      body: Stack("},{"type":"DELETE","lineNumber":67,"oldContent":"        children: ["},{"type":"INSERT","lineNumber":40,"content":"      bottomNavigationBar: SafeArea("},{"type":"INSERT","lineNumber":41,"content":"        top: false,"},{"type":"INSERT","lineNumber":42,"content":"        child: Container("},{"type":"INSERT","lineNumber":43,"content":"          height: 60,"},{"type":"INSERT","lineNumber":44,"content":"          color: const Color(0xFF0E2330),"},{"type":"INSERT","lineNumber":45,"content":"          child: Row("},{"type":"INSERT","lineNumber":46,"content":"            mainAxisAlignment: MainAxisAlignment.spaceAround,"},{"type":"INSERT","lineNumber":47,"content":"            children: List.generate(_navItems.length, (i) {"},{"type":"INSERT","lineNumber":48,"content":"              final item = _navItems[i];"},{"type":"INSERT","lineNumber":49,"content":"              final selected = i == _selectedIndex;"},{"type":"INSERT","lineNumber":50,"content":"              return InkWell("},{"type":"INSERT","lineNumber":51,"content":"                onTap: () => _onItemTapped(i),"},{"type":"INSERT","lineNumber":52,"content":"                child: Column("},{"type":"INSERT","lineNumber":53,"content":"                  mainAxisAlignment: MainAxisAlignment.center,"},{"type":"INSERT","lineNumber":54,"content":"                  children: ["},{"type":"INSERT","lineNumber":55,"content":"                    Icon("},{"type":"INSERT","lineNumber":56,"content":"                      item.icon,"},{"type":"INSERT","lineNumber":57,"content":"                      size: selected ? 26 : 24,"},{"type":"INSERT","lineNumber":58,"content":"                      color: selected ? Colors.cyanAccent : Colors.white,"},{"type":"INSERT","lineNumber":59,"content":"                    ),"},{"type":"INSERT","lineNumber":60,"content":"                    const SizedBox(height: 3),"},{"type":"INSERT","lineNumber":61,"content":"                    Text("},{"type":"INSERT","lineNumber":62,"content":"                      item.label,"},{"type":"INSERT","lineNumber":63,"content":"                      style: TextStyle("},{"type":"INSERT","lineNumber":64,"content":"                        fontSize: 11,"},{"type":"INSERT","lineNumber":65,"content":"                        fontWeight:"},{"type":"INSERT","lineNumber":66,"content":"                        selected ? FontWeight.w700 : FontWeight.w500,"},{"type":"INSERT","lineNumber":67,"content":"                        color:"},{"type":"DELETE","lineNumber":94,"oldContent":"        ],"},{"type":"DELETE","lineNumber":95,"oldContent":"      ),"},{"type":"DELETE","lineNumber":96,"oldContent":""},{"type":"DELETE","lineNumber":97,"oldContent":"      // main floating action (SpeedDial)"},{"type":"DELETE","lineNumber":98,"oldContent":"      floatingActionButton: _buildFab(theme, fabDiameter, fabIconSize),"},{"type":"DELETE","lineNumber":99,"oldContent":"      floatingActionButtonLocation: FloatingActionButtonLocation.miniEndFloat,"},{"type":"INSERT","lineNumber":94,"content":"        child: Container("},{"type":"INSERT","lineNumber":95,"content":"          width: diameter,"},{"type":"INSERT","lineNumber":96,"content":"          height: diameter,"},{"type":"INSERT","lineNumber":97,"content":"          decoration: const BoxDecoration("},{"type":"INSERT","lineNumber":98,"content":"            color: Color(0xFF0E2330),"},{"type":"INSERT","lineNumber":99,"content":"            shape: BoxShape.circle,"},{"type":"MODIFY","lineNumber":101,"content":"          child: const Icon(Icons.add, color: Colors.white, size: 28),","oldContent":"      // Bottom navigation bar  frosted, compact, minimal"},{"type":"DELETE","lineNumber":106,"oldContent":"          child: ClipRRect("},{"type":"DELETE","lineNumber":107,"oldContent":"            borderRadius: BorderRadius.circular(14),"},{"type":"DELETE","lineNumber":108,"oldContent":"            child: BackdropFilter("},{"type":"DELETE","lineNumber":109,"oldContent":"              // subtle blur on the bottom bar"},{"type":"DELETE","lineNumber":110,"oldContent":"              filter: ImageFilter.blur(sigmaX: 3.0, sigmaY: 3.0),"},{"type":"DELETE","lineNumber":111,"oldContent":"              child: Material("},{"type":"DELETE","lineNumber":112,"oldContent":"                color: theme.colorScheme.surface.withOpacity(0.92),"},{"type":"DELETE","lineNumber":113,"oldContent":"                child: BottomAppBar("},{"type":"DELETE","lineNumber":114,"oldContent":"                  elevation: 0,"},{"type":"DELETE","lineNumber":115,"oldContent":"                  notchMargin: 8,"},{"type":"DELETE","lineNumber":116,"oldContent":"                  shape: const CircularNotchedRectangle(),"},{"type":"DELETE","lineNumber":117,"oldContent":"                  color: Colors.transparent,"},{"type":"DELETE","lineNumber":118,"oldContent":"                  child: SizedBox("},{"type":"DELETE","lineNumber":119,"oldContent":"                    height: navHeight,"},{"type":"DELETE","lineNumber":120,"oldContent":"                    child: Stack("},{"type":"DELETE","lineNumber":121,"oldContent":"                      alignment: Alignment.center,"},{"type":"INSERT","lineNumber":106,"content":"      overlayColor: Colors.black,"},{"type":"INSERT","lineNumber":107,"content":"      backgroundColor: Colors.transparent,"},{"type":"INSERT","lineNumber":108,"content":"      elevation: 0,"},{"type":"INSERT","lineNumber":109,"content":"      spacing: 10,"},{"type":"INSERT","lineNumber":110,"content":"      spaceBetweenChildren: 10,"},{"type":"INSERT","lineNumber":111,"content":"      children: actions"},{"type":"INSERT","lineNumber":112,"content":"          .map((action) => SpeedDialChild("},{"type":"INSERT","lineNumber":113,"content":"        backgroundColor: const Color(0xFF0E2330),"},{"type":"INSERT","lineNumber":114,"content":"        child: Icon(action.icon, color: Colors.white, size: 20),"},{"type":"INSERT","lineNumber":115,"content":"        label: action.label,"},{"type":"INSERT","lineNumber":116,"content":"        labelStyle:"},{"type":"INSERT","lineNumber":117,"content":"        const TextStyle(color: Colors.white, fontSize: 14),"},{"type":"INSERT","lineNumber":118,"content":"        labelBackgroundColor: Colors.transparent,"},{"type":"INSERT","lineNumber":119,"content":"        onTap: () => GoRouter.of(context).push(action.route),"},{"type":"INSERT","lineNumber":120,"content":"      ))"},{"type":"INSERT","lineNumber":121,"content":"          .toList(),"},{"type":"MODIFY","lineNumber":138,"content":"","oldContent":"                            ),"},{"type":"DELETE","lineNumber":143,"oldContent":"                              selected: selected,"},{"type":"DELETE","lineNumber":144,"oldContent":"                              activeColor: activeColor,"},{"type":"DELETE","lineNumber":145,"oldContent":"                              inactiveColor: inactiveColor,"},{"type":"DELETE","lineNumber":146,"oldContent":"                              onTap: () => _onItemTapped(i),"},{"type":"DELETE","lineNumber":147,"oldContent":"                              iconSize: iconSize,"},{"type":"DELETE","lineNumber":148,"oldContent":"                            );"},{"type":"DELETE","lineNumber":149,"oldContent":"                          }),"},{"type":"DELETE","lineNumber":150,"oldContent":"                        ),"},{"type":"DELETE","lineNumber":151,"oldContent":"                      ],"},{"type":"DELETE","lineNumber":152,"oldContent":"                    ),"},{"type":"DELETE","lineNumber":153,"oldContent":"                  ),"},{"type":"DELETE","lineNumber":154,"oldContent":"                ),"},{"type":"DELETE","lineNumber":155,"oldContent":"              ),"},{"type":"DELETE","lineNumber":156,"oldContent":"            ),"},{"type":"DELETE","lineNumber":157,"oldContent":"          ),"},{"type":"DELETE","lineNumber":158,"oldContent":"        ),"},{"type":"DELETE","lineNumber":159,"oldContent":"      ),"},{"type":"DELETE","lineNumber":160,"oldContent":"    );"},{"type":"DELETE","lineNumber":161,"oldContent":"  }"},{"type":"DELETE","lineNumber":162,"oldContent":""},{"type":"DELETE","lineNumber":163,"oldContent":"  // FAB / SpeedDial builder"},{"type":"DELETE","lineNumber":164,"oldContent":"  Widget _buildFab(ThemeData theme, double diameter, double iconSize) {"},{"type":"DELETE","lineNumber":165,"oldContent":"    final actions = <_ActionItem>["},{"type":"DELETE","lineNumber":166,"oldContent":"      _ActionItem(icon: LucideIcons.scan, label: 'Scan Barcode', route: '/scan'),"},{"type":"DELETE","lineNumber":167,"oldContent":"      _ActionItem(icon: Icons.inventory_2_outlined, label: 'New Stock Take', route: '/new-stock-take'),"},{"type":"DELETE","lineNumber":168,"oldContent":"      _ActionItem(icon: Icons.precision_manufacturing, label: 'New Production Run', route: '/new-production'),"},{"type":"DELETE","lineNumber":169,"oldContent":"      _ActionItem(icon: Icons.article_outlined, label: 'New Bill of Material', route: '/new-bom'),"},{"type":"DELETE","lineNumber":170,"oldContent":"      _ActionItem(icon: Icons.shopping_cart_outlined, label: 'New Customer Order', route: '/new-order'),"},{"type":"DELETE","lineNumber":171,"oldContent":"    ];"},{"type":"DELETE","lineNumber":172,"oldContent":""},{"type":"DELETE","lineNumber":173,"oldContent":"    Widget _buildLabel(BuildContext ctx, IconData icon, String label) {"},{"type":"DELETE","lineNumber":174,"oldContent":"      final t = Theme.of(ctx);"},{"type":"DELETE","lineNumber":175,"oldContent":"      return ClipRRect("},{"type":"DELETE","lineNumber":176,"oldContent":"        borderRadius: BorderRadius.circular(12),"},{"type":"DELETE","lineNumber":177,"oldContent":"        child: BackdropFilter("},{"type":"DELETE","lineNumber":178,"oldContent":"          filter: ImageFilter.blur(sigmaX: 6, sigmaY: 6),"},{"type":"DELETE","lineNumber":179,"oldContent":"          child: Container("},{"type":"DELETE","lineNumber":180,"oldContent":"            padding: const EdgeInsets.symmetric(vertical: 8, horizontal: 12),"},{"type":"DELETE","lineNumber":181,"oldContent":"            color: t.colorScheme.surface.withOpacity(0.65),"},{"type":"DELETE","lineNumber":182,"oldContent":"            child: Row("},{"type":"DELETE","lineNumber":183,"oldContent":"              mainAxisSize: MainAxisSize.min,"},{"type":"DELETE","lineNumber":184,"oldContent":"              children: ["},{"type":"DELETE","lineNumber":185,"oldContent":"                Icon(icon, size: 16, color: t.colorScheme.onSurface.withOpacity(0.95)),"},{"type":"DELETE","lineNumber":186,"oldContent":"                const SizedBox(width: 10),"},{"type":"DELETE","lineNumber":187,"oldContent":"                Text(label, style: TextStyle(fontSize: 14, fontWeight: FontWeight.w600, color: t.colorScheme.onSurface)),"},{"type":"DELETE","lineNumber":188,"oldContent":"              ],"},{"type":"DELETE","lineNumber":189,"oldContent":"            ),"},{"type":"DELETE","lineNumber":190,"oldContent":"          ),"},{"type":"DELETE","lineNumber":191,"oldContent":"        ),"},{"type":"DELETE","lineNumber":192,"oldContent":"      );"},{"type":"DELETE","lineNumber":193,"oldContent":"    }"},{"type":"DELETE","lineNumber":194,"oldContent":""},{"type":"DELETE","lineNumber":195,"oldContent":"    final sdChildren = actions.map((a) {"},{"type":"DELETE","lineNumber":196,"oldContent":"      return SpeedDialChild("},{"type":"DELETE","lineNumber":197,"oldContent":"        child: const SizedBox.shrink(), // we only show labelWidget"},{"type":"DELETE","lineNumber":198,"oldContent":"        labelWidget: _buildLabel(context, a.icon, a.label),"},{"type":"DELETE","lineNumber":199,"oldContent":"        backgroundColor: Colors.transparent,"},{"type":"DELETE","lineNumber":200,"oldContent":"        labelBackgroundColor: Colors.transparent,"},{"type":"DELETE","lineNumber":201,"oldContent":"        onTap: () {"},{"type":"DELETE","lineNumber":202,"oldContent":"          _dialOpen.value = false;"},{"type":"DELETE","lineNumber":203,"oldContent":"          GoRouter.of(context).push(a.route);"},{"type":"DELETE","lineNumber":204,"oldContent":"        },"},{"type":"DELETE","lineNumber":205,"oldContent":"      );"},{"type":"DELETE","lineNumber":206,"oldContent":"    }).toList();"},{"type":"DELETE","lineNumber":207,"oldContent":""},{"type":"DELETE","lineNumber":208,"oldContent":"    final fabChild = Container("},{"type":"DELETE","lineNumber":209,"oldContent":"      width: diameter,"},{"type":"DELETE","lineNumber":210,"oldContent":"      height: diameter,"},{"type":"DELETE","lineNumber":211,"oldContent":"      decoration: BoxDecoration("},{"type":"DELETE","lineNumber":212,"oldContent":"        color: theme.colorScheme.primary,"},{"type":"DELETE","lineNumber":213,"oldContent":"        shape: BoxShape.circle,"},{"type":"DELETE","lineNumber":214,"oldContent":"        boxShadow: [BoxShadow(color: Colors.black.withOpacity(0.12), blurRadius: 8, offset: const Offset(0, 3))],"},{"type":"DELETE","lineNumber":215,"oldContent":"      ),"},{"type":"DELETE","lineNumber":216,"oldContent":"      child: Center(child: Icon(LucideIcons.plus, size: iconSize, color: Colors.white)),"},{"type":"DELETE","lineNumber":217,"oldContent":"    );"},{"type":"DELETE","lineNumber":218,"oldContent":""},{"type":"DELETE","lineNumber":219,"oldContent":"    final activeChild = Container("},{"type":"DELETE","lineNumber":220,"oldContent":"      width: diameter,"},{"type":"DELETE","lineNumber":221,"oldContent":"      height: diameter,"},{"type":"DELETE","lineNumber":222,"oldContent":"      decoration: BoxDecoration("},{"type":"DELETE","lineNumber":223,"oldContent":"        color: theme.colorScheme.primary,"},{"type":"DELETE","lineNumber":224,"oldContent":"        shape: BoxShape.circle,"},{"type":"DELETE","lineNumber":225,"oldContent":"      ),"},{"type":"DELETE","lineNumber":226,"oldContent":"      child: Center(child: Icon(Icons.close, size: iconSize, color: Colors.white)),"},{"type":"DELETE","lineNumber":227,"oldContent":"    );"},{"type":"DELETE","lineNumber":228,"oldContent":""},{"type":"DELETE","lineNumber":229,"oldContent":"    return SpeedDial("},{"type":"DELETE","lineNumber":230,"oldContent":"      icon: null,"},{"type":"DELETE","lineNumber":231,"oldContent":"      child: fabChild,"},{"type":"DELETE","lineNumber":232,"oldContent":"      activeChild: activeChild,"},{"type":"DELETE","lineNumber":233,"oldContent":"      openCloseDial: _dialOpen,"},{"type":"DELETE","lineNumber":234,"oldContent":"      onOpen: () => _dialOpen.value = true,"},{"type":"DELETE","lineNumber":235,"oldContent":"      onClose: () => _dialOpen.value = false,"},{"type":"DELETE","lineNumber":236,"oldContent":"      backgroundColor: Colors.transparent,"},{"type":"DELETE","lineNumber":237,"oldContent":"      foregroundColor: Colors.white,"},{"type":"DELETE","lineNumber":238,"oldContent":"      overlayOpacity: 0.0, // we manage our own overlay"},{"type":"DELETE","lineNumber":239,"oldContent":"      curve: Curves.easeInOut,"},{"type":"DELETE","lineNumber":240,"oldContent":"      elevation: 0,"},{"type":"DELETE","lineNumber":241,"oldContent":"      shape: const CircleBorder(),"},{"type":"DELETE","lineNumber":242,"oldContent":"      useRotationAnimation: true,"},{"type":"DELETE","lineNumber":243,"oldContent":"      animationDuration: const Duration(milliseconds: 240),"},{"type":"DELETE","lineNumber":244,"oldContent":"      children: sdChildren,"},{"type":"DELETE","lineNumber":245,"oldContent":"    );"},{"type":"DELETE","lineNumber":246,"oldContent":"  }"},{"type":"DELETE","lineNumber":247,"oldContent":""},{"type":"DELETE","lineNumber":248,"oldContent":"  Alignment _alignmentForIndex(int index, int total) {"},{"type":"DELETE","lineNumber":249,"oldContent":"    if (total <= 1) return Alignment.center;"},{"type":"DELETE","lineNumber":250,"oldContent":"    final frac = index / (total - 1);"},{"type":"DELETE","lineNumber":251,"oldContent":"    final ax = (frac * 2) - 1;"},{"type":"DELETE","lineNumber":252,"oldContent":"    return Alignment(ax, 0);"},{"type":"DELETE","lineNumber":253,"oldContent":"  }"},{"type":"DELETE","lineNumber":254,"oldContent":"}"},{"type":"DELETE","lineNumber":255,"oldContent":""},{"type":"DELETE","lineNumber":256,"oldContent":"// Reusable widgets and models"},{"type":"DELETE","lineNumber":257,"oldContent":""},{"type":"DELETE","lineNumber":258,"oldContent":"class _BottomNavItem extends StatelessWidget {"},{"type":"DELETE","lineNumber":259,"oldContent":"  final IconData icon;"},{"type":"DELETE","lineNumber":260,"oldContent":"  final String label;"},{"type":"DELETE","lineNumber":261,"oldContent":"  final bool selected;"},{"type":"DELETE","lineNumber":262,"oldContent":"  final Color activeColor;"},{"type":"DELETE","lineNumber":263,"oldContent":"  final Color inactiveColor;"},{"type":"DELETE","lineNumber":264,"oldContent":"  final VoidCallback onTap;"},{"type":"DELETE","lineNumber":265,"oldContent":"  final double iconSize;"},{"type":"DELETE","lineNumber":266,"oldContent":""},{"type":"DELETE","lineNumber":267,"oldContent":"  const _BottomNavItem({"},{"type":"DELETE","lineNumber":268,"oldContent":"    Key? key,"},{"type":"DELETE","lineNumber":269,"oldContent":"    required this.icon,"},{"type":"DELETE","lineNumber":270,"oldContent":"    required this.label,"},{"type":"DELETE","lineNumber":271,"oldContent":"    required this.selected,"},{"type":"DELETE","lineNumber":272,"oldContent":"    required this.activeColor,"},{"type":"DELETE","lineNumber":273,"oldContent":"    required this.inactiveColor,"},{"type":"DELETE","lineNumber":274,"oldContent":"    required this.onTap,"},{"type":"DELETE","lineNumber":275,"oldContent":"    required this.iconSize,"},{"type":"DELETE","lineNumber":276,"oldContent":"  }) : super(key: key);"},{"type":"DELETE","lineNumber":277,"oldContent":""},{"type":"DELETE","lineNumber":278,"oldContent":"  @override"},{"type":"DELETE","lineNumber":279,"oldContent":"  Widget build(BuildContext context) {"},{"type":"DELETE","lineNumber":280,"oldContent":"    return Expanded("},{"type":"DELETE","lineNumber":281,"oldContent":"      child: InkWell("},{"type":"DELETE","lineNumber":282,"oldContent":"        onTap: onTap,"},{"type":"DELETE","lineNumber":283,"oldContent":"        child: SizedBox("},{"type":"DELETE","lineNumber":284,"oldContent":"          height: double.infinity,"},{"type":"DELETE","lineNumber":285,"oldContent":"          child: Column("},{"type":"DELETE","lineNumber":286,"oldContent":"            mainAxisAlignment: MainAxisAlignment.center,"},{"type":"DELETE","lineNumber":287,"oldContent":"            children: ["},{"type":"DELETE","lineNumber":288,"oldContent":"              Icon(icon, size: iconSize, color: selected ? activeColor : inactiveColor),"},{"type":"DELETE","lineNumber":289,"oldContent":"              const SizedBox(height: 4),"},{"type":"DELETE","lineNumber":290,"oldContent":"              AnimatedDefaultTextStyle("},{"type":"DELETE","lineNumber":291,"oldContent":"                duration: const Duration(milliseconds: 200),"},{"type":"DELETE","lineNumber":292,"oldContent":"                style: TextStyle("},{"type":"DELETE","lineNumber":293,"oldContent":"                  fontSize: 11,"},{"type":"DELETE","lineNumber":294,"oldContent":"                  fontWeight: selected ? FontWeight.w700 : FontWeight.w600,"},{"type":"DELETE","lineNumber":295,"oldContent":"                  color: selected ? activeColor : inactiveColor,"},{"type":"DELETE","lineNumber":296,"oldContent":"                ),"},{"type":"DELETE","lineNumber":297,"oldContent":"                child: Text(label),"},{"type":"DELETE","lineNumber":298,"oldContent":"              ),"},{"type":"DELETE","lineNumber":299,"oldContent":"            ],"},{"type":"DELETE","lineNumber":300,"oldContent":"          ),"},{"type":"DELETE","lineNumber":301,"oldContent":"        ),"},{"type":"DELETE","lineNumber":302,"oldContent":"      ),"},{"type":"DELETE","lineNumber":303,"oldContent":"    );"},{"type":"DELETE","lineNumber":304,"oldContent":"  }"},{"type":"DELETE","lineNumber":305,"oldContent":"}"},{"type":"DELETE","lineNumber":306,"oldContent":""},{"type":"DELETE","lineNumber":307,"oldContent":"class _NavItem {"},{"type":"DELETE","lineNumber":308,"oldContent":"  final IconData icon;"},{"type":"DELETE","lineNumber":309,"oldContent":"  final String label;"},{"type":"DELETE","lineNumber":310,"oldContent":"  final String route;"},{"type":"DELETE","lineNumber":311,"oldContent":"  const _NavItem({required this.icon, required this.label, required this.route});"},{"type":"DELETE","lineNumber":312,"oldContent":"}"},{"type":"DELETE","lineNumber":313,"oldContent":""},{"type":"DELETE","lineNumber":314,"oldContent":"class _ActionItem {"},{"type":"DELETE","lineNumber":315,"oldContent":"  final IconData icon;"},{"type":"DELETE","lineNumber":316,"oldContent":"  final String label;"},{"type":"DELETE","lineNumber":317,"oldContent":"  final String route;"},{"type":"DELETE","lineNumber":318,"oldContent":"  const _ActionItem({required this.icon, required this.label, required this.route});"},{"type":"DELETE","lineNumber":319,"oldContent":"}"},{"type":"DELETE","lineNumber":320,"oldContent":""}]}]},"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/config/router/app_router.dart":{"filePath":"C:/Users/USER/Documents/Stock Management System/Frontend/clean_arch_app/lib/config/router/app_router.dart","baseContent":"import 'package:clean_arch_app/presentation/stocktake/stocktake_page.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter_riverpod/flutter_riverpod.dart';\nimport 'package:go_router/go_router.dart';\nimport '../../di/injection.dart';\nimport '../../presentation/auth/login_page.dart';\nimport '../../presentation/common/widgets/main_scaffold.dart';\nimport '../../presentation/dashboard/dashboard_page.dart';\nimport '../../presentation/stock/stock_page.dart';\nimport '../../presentation/product_form/add_product_page.dart';\nimport '../../presentation/suppliers/supplier_page.dart';\nimport '../../presentation/users/user_management_page.dart';\nimport '../../presentation/settings/settings_page.dart';\nimport 'route_names.dart';\n\nfinal routerProvider = Provider<GoRouter>((ref) {\n  final authState = ref.watch(authViewModelProvider);\n\n  return GoRouter(\n    initialLocation: RouteNames.stock,\n    routes: [\n      ShellRoute(\n        builder: (context, state, child) => MainScaffold(),\n\n        routes: [\n          GoRoute(\n            path: RouteNames.login,\n            name: RouteNames.login,\n            builder: (context, state) => const LoginPage(),\n          ),\n          GoRoute(\n            path: RouteNames.dashboard,\n            name: RouteNames.dashboard,\n            builder: (context, state) =>\n                DashboardPage(),\n          ),\n          GoRoute(\n            path: RouteNames.stock,\n            name: RouteNames.stock,\n            builder: (context, state) => StockPage(),\n          ),\n          GoRoute(\n            path: RouteNames.stocktake,\n            name: RouteNames.stocktake,\n            builder: (context, state) => StockTakePage(),\n          ),\n          GoRoute(\n            path: RouteNames.addProduct,\n            name: RouteNames.addProduct,\n            builder: (context, state) => const AddProductPage(),\n          ),\n          GoRoute(\n            path: RouteNames.suppliers,\n            name: RouteNames.suppliers,\n            builder: (context, state) => SupplierPage(),\n          ),\n          GoRoute(\n            path: RouteNames.users,\n            name: RouteNames.users,\n            builder: (context, state) => UserManagementPage(),\n          ),\n          GoRoute(\n            path: RouteNames.settings,\n            name: RouteNames.settings,\n            builder: (context, state) => const SettingsPage(),\n          ),\n        ],\n      ),\n    ],\n    errorBuilder: (context, state) =>\n        Scaffold(body: Center(child: Text('Page not found: ${state.error}'))),\n  );\n});\n","baseTimestamp":1755128187419,"deltas":[{"timestamp":1755128193132,"changes":[{"type":"MODIFY","lineNumber":22,"content":"        builder: (context, state, child) => MainScaffold(child: child),","oldContent":"        builder: (context, state, child) => MainScaffold(),"}]}]},"/Dummy.txt":{"filePath":"/Dummy.txt","baseContent":"Update initial route to stock and reformat plugin registration files\n\nThe initial route in `app_router.dart` has been changed from `dashboard` to `stock`.\n\nAdditionally, the following files related to plugin registration for Linux and Windows have been reformatted for improved readability:\n- `windows/flutter/generated_plugin_registrant.cc`\n- `windows/flutter/generated_plugins.cmake`\n- `linux/flutter/generated_plugin_registrant.cc`\n- `windows/flutter/generated_plugin_registrant.h`\n- `linux/flutter/generated_plugins.cmake`\n- `linux/flutter/generated_plugin_registrant.h`\n\nThe `devtools_options.yaml` file has been updated to include `provider: true` under extensions.","baseTimestamp":1755129192267}}}